import{u as e,a as s,R as t,j as a,m as r,r as i,C as n,N as l,b as o,c as d,d as c,B as m}from"./vendor_react-qAALtyYz.js";import{i as x,g as h,a as g,G as u,u as p}from"./vendor_firebase-CJsQZ0b1.js";import{ax as j,ay as y}from"./vendor-CzvBJG2x.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const v={};let b,f=null,N=null,w=null;try{const e="undefined"!=typeof window&&window.__ENV__?(console.log("Using Firebase config from window.__ENV__"),{apiKey:window.__ENV__.VITE_FIREBASE_API_KEY,authDomain:window.__ENV__.VITE_FIREBASE_AUTH_DOMAIN,projectId:window.__ENV__.VITE_FIREBASE_PROJECT_ID,storageBucket:window.__ENV__.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:window.__ENV__.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:window.__ENV__.VITE_FIREBASE_APP_ID,measurementId:window.__ENV__.VITE_FIREBASE_MEASUREMENT_ID}):import.meta&&v?(console.log("Using Firebase config from import.meta.env"),{apiKey:"AIzaSyCYsr6oZ3j-R7nJe6xWaRO6Q5xi0Rk3IV8",authDomain:"procalenderfrontend.firebaseapp.com",projectId:"procalenderfrontend",storageBucket:"procalenderfrontend.firebasestorage.app",messagingSenderId:"302768668350",appId:"1:302768668350:web:b92f80489662289e28e8ef",measurementId:"G-QJWKGJN76S"}):(console.log("Using hardcoded Firebase config"),{apiKey:"AIzaSyCYsr6oZ3j-R7nJe6xWaRO6Q5xi0Rk3IV8",authDomain:"procalenderfrontend.firebaseapp.com",projectId:"procalenderfrontend",storageBucket:"procalenderfrontend.firebasestorage.app",messagingSenderId:"302768668350",appId:"1:302768668350:web:b92f80489662289e28e8ef",measurementId:"G-QJWKGJN76S"});if(console.log("Firebase config:",{...e,apiKey:e.apiKey?"[PRESENT]":"[MISSING]"}),!e.apiKey||!e.authDomain||!e.projectId)throw new Error("Missing required Firebase configuration properties");b=x(e),console.log("Firebase app initialized successfully"),f=h(b),N=g(b),w=new u,console.log("Current domain:",window.location.hostname),console.log("Firebase Auth domain:",e.authDomain)}catch(J){console.error("Firebase initialization error:",J.message)}const k=({className:e=""})=>a.jsx("div",{className:`text-indigo-600 ${e}`,children:a.jsxs("svg",{className:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("rect",{x:"3",y:"6",width:"18",height:"15",rx:"2",fill:"currentColor"}),a.jsx("rect",{x:"5",y:"8",width:"14",height:"11",rx:"1",fill:"white"}),a.jsx("rect",{x:"7",y:"3",width:"2",height:"4",rx:"1",fill:"currentColor"}),a.jsx("rect",{x:"15",y:"3",width:"2",height:"4",rx:"1",fill:"currentColor"}),a.jsx("rect",{x:"7",y:"10",width:"10",height:"1.5",rx:"0.75",fill:"currentColor"}),a.jsx("rect",{x:"7",y:"14",width:"6",height:"1.5",rx:"0.75",fill:"currentColor"})]})}),C=()=>{var r,i,n;const l=e(),o=s(),[d,c]=t.useState(null),[m,x]=t.useState(!1),[h,g]=t.useState(!1);t.useEffect((()=>{const e=f.onAuthStateChanged((e=>{c(e)}));return()=>e()}),[]);const u=async()=>{try{await f.signOut(),l("/login")}catch(J){console.error("Error signing out:",J)}},p=e=>"/dashboard"===e&&"/"===o.pathname||(o.pathname===e||o.pathname.startsWith(`${e}/`)),j=[{name:"Dashboard",path:"/dashboard",icon:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{name:"Meetings",path:"/meetings",icon:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{name:"Availability",path:"/create-window",icon:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{name:"Booking Links",path:"/create-link",icon:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"})})}],y=()=>{g((e=>!e))},v=()=>{x((e=>!e))};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 px-4 py-3 flex items-center justify-between bg-white z-30 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(k,{}),a.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Slotify"})]}),a.jsxs("button",{onClick:y,className:"p-2 rounded-md text-gray-600 hover:bg-gray-100","aria-expanded":h,"aria-controls":"mobile-menu",children:[a.jsx("span",{className:"sr-only",children:"Open menu"}),a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})]}),h&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-40 lg:hidden",onClick:()=>g(!1),"aria-hidden":"true"}),a.jsx("div",{id:"mobile-menu",className:"fixed top-0 bottom-0 left-0 right-0 z-50 w-full bg-white transform transition-transform ease-in-out duration-300 lg:hidden "+(h?"translate-x-0":"-translate-x-full"),style:{maxWidth:"20rem"},children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-4 py-4 border-b border-gray-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(k,{}),a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Slotify"})]}),a.jsxs("button",{onClick:y,className:"p-2 rounded-md text-gray-600 hover:bg-gray-100",children:[a.jsx("span",{className:"sr-only",children:"Close menu"}),a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),d&&a.jsxs("div",{className:"flex items-center px-4 py-4 border-b border-gray-200",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold",children:d.displayName?d.displayName.charAt(0).toUpperCase():(null==(r=d.email)?void 0:r.charAt(0).toUpperCase())||"U"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:d.displayName||"User"}),a.jsx("p",{className:"text-xs text-gray-500 truncate",style:{maxWidth:"200px"},children:d.email})]})]}),a.jsx("nav",{className:"flex-1 px-2 py-4 bg-white overflow-y-auto",children:a.jsx("div",{className:"space-y-1",children:j.map((e=>a.jsxs("a",{href:e.path,onClick:s=>{s.preventDefault(),g(!1),l(e.path)},className:`\n                    group flex items-center px-4 py-3 text-base font-medium rounded-md transition-colors duration-200\n                    ${p(e.path)?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-50 hover:text-indigo-600"}\n                  `,children:[a.jsx("span",{className:"mr-3",children:e.icon}),e.name]},e.path)))})}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:a.jsxs("button",{onClick:u,className:"flex items-center justify-center w-full px-4 py-2 text-base font-medium text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-md transition-colors duration-200",children:[a.jsx("svg",{className:"mr-3 h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign out"]})})]})}),a.jsxs("aside",{className:"hidden lg:flex flex-col fixed top-0 bottom-0 left-0 z-30 flex-shrink-0 overflow-y-auto bg-white border-r border-gray-200 transition-all duration-300 ease-in-out "+(m?"w-20":"w-64"),children:[a.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center "+(m?"justify-center w-full":""),children:[a.jsx(k,{}),!m&&a.jsx("h1",{className:"ml-2 text-xl font-bold text-gray-900",children:"Slotify"})]}),!m&&a.jsxs("button",{onClick:v,className:"p-1 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100",children:[a.jsx("span",{className:"sr-only",children:"Collapse sidebar"}),a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})]}),m&&a.jsxs("button",{onClick:v,className:"absolute -right-3 top-10 bg-white rounded-full shadow-md p-1 border border-gray-200 text-gray-500 hover:text-gray-600",children:[a.jsx("span",{className:"sr-only",children:"Expand sidebar"}),a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})]})]}),d&&!m&&a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-gray-200",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold",children:d.displayName?d.displayName.charAt(0).toUpperCase():(null==(i=d.email)?void 0:i.charAt(0).toUpperCase())||"U"}),a.jsxs("div",{className:"ml-3 overflow-hidden",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:d.displayName||"User"}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:d.email})]})]}),d&&m&&a.jsx("div",{className:"flex justify-center py-3 border-b border-gray-200",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold",children:d.displayName?d.displayName.charAt(0).toUpperCase():(null==(n=d.email)?void 0:n.charAt(0).toUpperCase())||"U"})}),a.jsx("nav",{className:"flex-1 px-2 py-4 bg-white",children:a.jsx("div",{className:"space-y-1",children:j.map((e=>a.jsxs("a",{href:e.path,onClick:s=>{s.preventDefault(),l(e.path)},className:`\n                  group flex items-center ${m?"px-2 py-3 justify-center":"px-3 py-3"} text-sm font-medium rounded-md transition-colors duration-200\n                  ${p(e.path)?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-50 hover:text-indigo-600"}\n                `,title:m?e.name:"",children:[a.jsx("span",{className:m?"":"mr-3",children:e.icon}),!m&&e.name]},e.path)))})}),a.jsx("div",{className:"p-4 border-t border-gray-200 "+(m?"flex justify-center":""),children:a.jsxs("button",{onClick:u,className:`\n              flex items-center text-gray-700 hover:text-red-600 \n              ${m?"p-2 justify-center":"px-3 py-2"} \n              rounded-md hover:bg-red-50 transition-colors duration-200\n              ${m?"w-auto":"w-full"}\n            `,title:m?"Sign out":"",children:[a.jsx("svg",{className:"h-5 w-5 "+(m?"":"mr-3"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),!m&&a.jsx("span",{className:"font-medium",children:"Sign out"})]})})]})]})},S=({children:e})=>{const r=s(),[i,n]=t.useState("Dashboard");return t.useEffect((()=>{const e=r.pathname;if("/"===e||"/dashboard"===e)n("Dashboard");else if("/meetings"===e)n("Meetings");else if("/create-window"===e)n("Create Availability Window");else if("/create-link"===e)n("Create Booking Link");else if(e.startsWith("/meetings/"))n("Meeting Details");else if(e.startsWith("/links/"))n("Link Details");else{const s=e.split("/").filter(Boolean);if(s.length>0){const e=s[s.length-1];n(e.charAt(0).toUpperCase()+e.slice(1).replace(/-/g," "))}}}),[r]),a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(C,{}),a.jsxs("main",{className:"lg:pl-64 transition-all duration-300",children:[a.jsx("div",{className:"lg:hidden h-14"}),a.jsxs("div",{className:"py-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"mb-6",children:a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i})}),a.jsx("div",{className:"animate-fadeIn",children:e})]})]})]})},L=({children:e,onClick:s,isLoading:t=!1,variant:r="primary",className:i="",type:n="button",disabled:l=!1,fullWidth:o=!1,size:d="md",icon:c=null})=>a.jsx("button",{type:n,onClick:s,disabled:t||l,className:`inline-flex items-center justify-center font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all rounded-md ${{sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"}[d]} ${{primary:"bg-indigo-600 hover:bg-indigo-700 text-white focus:ring-indigo-500 shadow-sm",secondary:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-indigo-500 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white focus:ring-emerald-500 shadow-sm",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white focus:ring-amber-500 shadow-sm",info:"bg-sky-500 hover:bg-sky-600 text-white focus:ring-sky-500 shadow-sm",light:"bg-gray-50 hover:bg-gray-100 text-gray-800 focus:ring-gray-300 shadow-sm",dark:"bg-gray-800 hover:bg-gray-900 text-white focus:ring-gray-500 shadow-sm",link:"bg-transparent hover:underline text-indigo-600 hover:text-indigo-800 p-0 shadow-none focus:ring-0"}[r]} ${t||l?"opacity-70 cursor-not-allowed":""} ${o?"w-full":""} ${i}`,children:t?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsx("span",{children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[c&&a.jsx("span",{className:"mr-2",children:c}),e]})}),A=({children:e,className:s="",hover:t=!1,padding:r="p-6",bordered:i=!0,onClick:n=null})=>a.jsx("div",{className:`bg-white rounded-xl ${i?"border border-gray-100":""} shadow-sm ${t?"transition-all duration-200 hover:shadow-md hover:-translate-y-1":""} ${r} ${s} ${n?"cursor-pointer":""}`,onClick:n,children:e}),M=({children:e,variant:s="primary",size:t="md",rounded:r=!1,className:i=""})=>a.jsx("span",{className:`inline-flex items-center font-medium ${{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-sm",lg:"px-3 py-1 text-base"}[t]} ${{primary:"bg-indigo-100 text-indigo-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",danger:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800",light:"bg-gray-50 text-gray-600",dark:"bg-gray-800 text-white"}[s]} ${r?"rounded-full":"rounded"} ${i}`,children:e}),E=({title:e,description:s,actionText:t,onAction:r,icon:i=null,className:n=""})=>a.jsxs("div",{className:`text-center py-12 px-4 ${n}`,children:[i&&a.jsx("div",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",children:i}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e}),a.jsx("p",{className:"text-sm text-gray-500 max-w-md mx-auto mb-6",children:s}),t&&r&&a.jsx(L,{onClick:r,variant:"primary",size:"md",children:t})]}),T=({isOpen:e,onClose:s,title:r,children:i,footer:n=null,size:l="md"})=>(t.useEffect((()=>{const t=e=>{"Escape"===e.key&&s()};return e&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="auto"}}),[e,s]),e?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:s,children:a.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),a.jsxs("div",{className:`inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle ${{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl",full:"max-w-full"}[l]} w-full`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-3 mb-4",children:[a.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",id:"modal-headline",children:r}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 transition-colors duration-150 focus:outline-none",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"mt-2",children:i})]}),n&&a.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:n})]})]})}):null),D=({title:e,message:s,type:t="info",onClose:r=null,className:i=""})=>{const n={info:a.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),success:a.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),warning:a.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),error:a.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})};return a.jsx("div",{className:`rounded-md border p-4 ${{info:"bg-blue-50 border-blue-200 text-blue-800",success:"bg-green-50 border-green-200 text-green-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",error:"bg-red-50 border-red-200 text-red-800"}[t]} ${i}`,role:"alert",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:n[t]}),a.jsxs("div",{className:"ml-3",children:[e&&a.jsx("h3",{className:"text-sm font-medium",children:e}),s&&a.jsx("div",{className:"text-sm mt-1",children:s})]}),r&&a.jsx("div",{className:"ml-auto pl-3",children:a.jsx("div",{className:"-mx-1.5 -my-1.5",children:a.jsxs("button",{type:"button",onClick:r,className:"inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 "+("info"===t?"focus:ring-blue-500":"success"===t?"focus:ring-green-500":"warning"===t?"focus:ring-yellow-500":"focus:ring-red-500"),children:[a.jsx("span",{className:"sr-only",children:"Dismiss"}),a.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})})},B=({enabled:e,onChange:s,label:t="",size:r="md",disabled:i=!1,className:n=""})=>{const l={sm:{toggle:"h-4 w-7",dot:"h-3 w-3",translate:"translate-x-3"},md:{toggle:"h-5 w-10",dot:"h-4 w-4",translate:"translate-x-5"},lg:{toggle:"h-6 w-12",dot:"h-5 w-5",translate:"translate-x-6"}};return a.jsxs("div",{className:`flex items-center ${n}`,children:[a.jsx("button",{type:"button",onClick:()=>!i&&s(!e),className:`\n          ${l[r].toggle} \n          ${e?"bg-indigo-600":"bg-gray-200"} \n          ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n          relative inline-flex flex-shrink-0 rounded-full border-2 border-transparent \n          transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 \n          focus:ring-offset-2 focus:ring-indigo-500\n        `,disabled:i,role:"switch","aria-checked":e,children:a.jsx("span",{className:`\n            ${l[r].dot}\n            ${e?l[r].translate:"translate-x-0"} \n            pointer-events-none inline-block rounded-full bg-white shadow transform \n            ring-0 transition ease-in-out duration-200\n          `})}),t&&a.jsx("span",{className:"ml-3 text-sm text-gray-700",children:t})]})},I=r(j),R=()=>{const s=e(),[t,r]=i.useState("upcoming"),[l,o]=i.useState([]),[d,c]=i.useState([]),[m,x]=i.useState(!0),[h,g]=i.useState(""),[u,p]=i.useState(!1),[y,v]=i.useState(!1),[b,N]=i.useState(null),[w,k]=i.useState({totalBookings:0,pendingApprovals:0,completedMeetings:0});i.useEffect((()=>{(async()=>{var e;try{x(!0);const s=null==(e=f.currentUser)?void 0:e.uid,t=[{id:"1",linkId:"1",ownerId:s,clientName:"John Smith",clientEmail:"john@example.com",meetingName:"Initial Consultation",startTime:new Date(Date.now()+864e5),endTime:new Date(Date.now()+864e5+18e5),status:"confirmed",approvalStatus:"approved",questions:[{question:"What topics would you like to discuss?",answer:"Product strategy"}]},{id:"2",linkId:"2",ownerId:s,clientName:"Sarah Johnson",clientEmail:"sarah@example.com",meetingName:"Follow-up Session",startTime:new Date(Date.now()+1728e5),endTime:new Date(Date.now()+1728e5+36e5),status:"pending",approvalStatus:"pending",questions:[{question:"What topics would you like to discuss?",answer:"Marketing plan"}]}],a=[{id:"1",linkId:"abc123",ownerId:s,meetingName:"Initial Consultation",meetingLength:30,requiresApproval:!1,usageCount:5},{id:"2",linkId:"def456",ownerId:s,meetingName:"Follow-up Session",meetingLength:60,requiresApproval:!0,usageCount:2}];o(t),c(a),k({totalBookings:t.length,pendingApprovals:t.filter((e=>"pending"===e.approvalStatus)).length,completedMeetings:t.filter((e=>"completed"===e.status)).length})}catch(s){console.error("Error fetching dashboard data:",s),g("Failed to load dashboard data. Please try again.")}finally{x(!1)}})()}),[]);const C=async e=>{try{x(!0),await new Promise((e=>setTimeout(e,500)));const s=l.map((s=>s.id===b.id?{...s,approvalStatus:e,status:"approved"===e?"confirmed":"canceled",["approved"===e?"approvedBy":"rejectedBy"]:f.currentUser.uid,["approved"===e?"approvedAt":"rejectedAt"]:(new Date).toISOString()}:s));o(s),v(!1),N(null),k((e=>({...e,pendingApprovals:s.filter((e=>"pending"===e.approvalStatus)).length})))}catch(s){console.error("Error updating booking:",s),g("Failed to update booking. Please try again.")}finally{x(!1)}},B=l.filter((e=>{const s=new Date;switch(t){case"upcoming":return"completed"!==e.status&&new Date(e.startTime)>s;case"pending":return"pending"===e.approvalStatus;case"past":return"completed"===e.status||new Date(e.startTime)<s;default:return!0}})),R=l.map((e=>({id:e.id,title:`${e.meetingName} with ${e.clientName}`,start:new Date(e.startTime),end:new Date(e.endTime),status:e.status,approvalStatus:e.approvalStatus})));return a.jsxs(S,{children:[h&&a.jsx(D,{type:"error",message:h,onClose:()=>g(""),className:"mb-6"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"upcoming"===t?"Your upcoming meetings":"pending"===t?"Meetings awaiting approval":"Your past meetings"})]}),a.jsxs("div",{className:"mt-4 md:mt-0 flex space-x-3",children:[a.jsx(L,{onClick:()=>p(!0),children:"Create Booking Link"}),a.jsx(L,{variant:"secondary",onClick:()=>s("/availability"),children:"Set Availability"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx(A,{children:a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Bookings"}),a.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:w.totalBookings})]})}),a.jsx(A,{children:a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Pending Approvals"}),a.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:w.pendingApprovals})]})}),a.jsx(A,{children:a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Completed Meetings"}),a.jsx("p",{className:"text-3xl font-semibold text-gray-900",children:w.completedMeetings})]})})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>r("upcoming"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("upcoming"===t?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Upcoming"}),a.jsxs("button",{onClick:()=>r("pending"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("pending"===t?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Pending Approval",w.pendingApprovals>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:w.pendingApprovals})]}),a.jsx("button",{onClick:()=>r("past"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("past"===t?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Past Meetings"}),a.jsx("button",{onClick:()=>r("calendar"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm "+("calendar"===t?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Calendar View"})]})}),"calendar"===t?a.jsx(A,{className:"p-4 h-[600px]",children:a.jsx(n,{localizer:I,events:R,startAccessor:"start",endAccessor:"end",style:{height:"100%"},eventPropGetter:e=>{let s="#3182ce";return"pending"===e.approvalStatus&&(s="#ed8936"),"completed"===e.status&&(s="#38a169"),"canceled"===e.status&&(s="#e53e3e"),{style:{backgroundColor:s,borderRadius:"4px",opacity:.8,color:"white",border:"0px",display:"block"}}},onSelectEvent:e=>{const s=l.find((s=>s.id===e.id));N(s)}})}):a.jsx("div",{className:"space-y-4",children:m?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):B.length>0?B.map((e=>a.jsx(A,{className:"hover:shadow-md transition-shadow",children:a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{className:"mb-4 md:mb-0",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[e.meetingName," with ",e.clientName]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[j(e.startTime).format("MMMM Do YYYY, h:mm a")," -"," ",j(e.endTime).format("h:mm a")]}),a.jsxs("div",{className:"mt-2 flex space-x-2",children:[a.jsx(M,{variant:"pending"===e.approvalStatus?"warning":"confirmed"===e.status?"success":"canceled"===e.status?"error":"default",children:"pending"===e.approvalStatus?"Pending Approval":"confirmed"===e.status?"Confirmed":"canceled"===e.status?"Canceled":"Completed"}),"approved"===e.approvalStatus&&e.approvedAt&&a.jsxs(M,{variant:"success",children:["Approved ",j(e.approvedAt).fromNow()]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(L,{variant:"secondary",size:"sm",onClick:()=>{N(e),"pending"===e.approvalStatus?v(!0):s(`/booking/${e.id}`)},children:"pending"===e.approvalStatus?"Review":"Details"}),a.jsx(L,{variant:"primary",size:"sm",onClick:()=>window.location.href=`mailto:${e.clientEmail}`,children:"Contact"})]})]})})},e.id))):a.jsx(E,{title:`No ${t} meetings found`,description:`You don't have any ${t} meetings scheduled yet.`,icon:a.jsx("svg",{className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),a.jsxs("div",{className:"mt-12",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Your Booking Links"}),a.jsx(L,{size:"sm",onClick:()=>p(!0),children:"Create New Link"})]}),d.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((e=>a.jsx(A,{className:"hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e.meetingName}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[e.meetingLength," min • ",e.requiresApproval?"Approval Required":"Auto-confirm"]})]}),a.jsxs(M,{variant:"secondary",children:[e.usageCount," ",1===e.usageCount?"booking":"bookings"]})]}),a.jsxs("div",{className:"mt-4 flex space-x-2",children:[a.jsx(L,{variant:"secondary",size:"sm",onClick:()=>s(`/link/${e.linkId}`),children:"Edit"}),a.jsx(L,{variant:"primary",size:"sm",onClick:()=>navigator.clipboard.writeText(`https://slotify.app/book/${e.linkId}`),children:"Copy Link"})]})]})},e.id)))}):a.jsx(E,{title:"No booking links created yet",description:"Create your first booking link to start accepting meetings.",action:a.jsx(L,{onClick:()=>p(!0),children:"Create Booking Link"}),icon:a.jsx("svg",{className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})})]}),a.jsx(T,{isOpen:u,onClose:()=>p(!1),title:"Create New Booking Link",size:"lg",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Create a customized link that clients can use to book meetings with you."}),a.jsx(L,{fullWidth:!0,onClick:()=>{p(!1),s("/create-link")},children:"Create Custom Link"}),a.jsx(L,{variant:"secondary",fullWidth:!0,onClick:()=>{p(!1),s("/create-link/quick")},children:"Quick Create"})]})}),b&&a.jsx(T,{isOpen:y,onClose:()=>{v(!1),N(null)},title:"Review Booking Request",size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Meeting Details"}),a.jsxs("p",{className:"mt-1 text-gray-600",children:[b.meetingName," with ",b.clientName]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[j(b.startTime).format("MMMM Do YYYY, h:mm a")," -"," ",j(b.endTime).format("h:mm a")]})]}),b.questions&&b.questions.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Client Responses"}),a.jsx("div",{className:"mt-2 space-y-3",children:b.questions.map(((e,s)=>a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.question}),a.jsx("p",{className:"mt-1 text-gray-600",children:e.answer||"No response"})]},s)))})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(L,{variant:"error",onClick:()=>C("rejected"),disabled:m,children:"Reject"}),a.jsx(L,{onClick:()=>C("approved"),disabled:m,children:"Approve"})]})]})})]})},z=y.create({baseURL:"https://www.googleapis.com/calendar/v3",headers:{"Content-Type":"application/json"}});z.interceptors.request.use((async e=>{const s=localStorage.getItem("googleCalendarTokens");if(s){const t=JSON.parse(s);e.headers.Authorization=`Bearer ${t.access_token}`}return e}),(e=>Promise.reject(e))),z.interceptors.response.use((e=>e),(async e=>{const s=e.config;if(401===e.response.status&&!s._retry){s._retry=!0;try{return alert("Your Google Calendar session has expired. Please reconnect."),window.location.href="/dashboard",Promise.reject(e)}catch(t){return Promise.reject(t)}}return Promise.reject(e)}));const $={}.REACT_APP_API_BASE_URL||"https://api.example.com";const W=new class{constructor(){this.tokens=null,this.syncInterval=null,this.eventListeners={"calendar-updated":[],"conflict-detected":[]},this.loadTokens()}loadTokens(){try{const e=localStorage.getItem("googleCalendarTokens");e&&(this.tokens=JSON.parse(e))}catch(J){console.error("Failed to load Google Calendar tokens:",J),this.tokens=null}}saveTokens(e){try{localStorage.setItem("googleCalendarTokens",JSON.stringify(e)),this.tokens=e}catch(J){console.error("Failed to save Google Calendar tokens:",J)}}isConnected(){return!!this.tokens}getAuthUrl(){return`${$}/auth/google-calendar`}async handleAuthCallback(e){try{const s=await z.post(`${$}/auth/google-calendar/callback`,{code:e});return this.saveTokens(s.data.tokens),this.startSyncProcess(),!0}catch(J){return console.error("Failed to authenticate with Google Calendar:",J),!1}}async disconnect(){try{return this.tokens&&await z.post(`${$}/auth/google-calendar/revoke`,{token:this.tokens.access_token}),localStorage.removeItem("googleCalendarTokens"),this.tokens=null,this.stopSyncProcess(),!0}catch(J){return console.error("Failed to disconnect Google Calendar:",J),!1}}addEventListener(e,s){this.eventListeners[e]&&this.eventListeners[e].push(s)}removeEventListener(e,s){this.eventListeners[e]&&(this.eventListeners[e]=this.eventListeners[e].filter((e=>e!==s)))}emitEvent(e,s){this.eventListeners[e]&&this.eventListeners[e].forEach((t=>{try{t(s)}catch(J){console.error(`Error in ${e} event listener:`,J)}}))}startSyncProcess(){this.syncInterval&&this.stopSyncProcess(),this.syncCalendars(),this.syncInterval=setInterval((()=>{this.syncCalendars()}),3e5),this.registerWebhooks()}stopSyncProcess(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null),this.unregisterWebhooks()}async registerWebhooks(){if(this.tokens)try{const e=await this.getCalendarList();for(const s of e)await z.post(`${$}/webhooks/google-calendar/register`,{calendarId:s.id,token:this.tokens.access_token})}catch(J){console.error("Failed to register webhooks:",J)}}async unregisterWebhooks(){if(this.tokens)try{await z.post(`${$}/webhooks/google-calendar/unregister`,{token:this.tokens.access_token})}catch(J){console.error("Failed to unregister webhooks:",J)}}async makeRequest(e,s="GET",t=null){if(!this.tokens)throw new Error("Not authenticated with Google Calendar");try{return(await z({method:s,url:`https://www.googleapis.com/calendar/v3${e}`,headers:{Authorization:`Bearer ${this.tokens.access_token}`},data:t})).data}catch(J){if(J.response&&401===J.response.status)return await this.refreshTokens(),this.makeRequest(e,s,t);throw J}}async refreshTokens(){if(!this.tokens||!this.tokens.refresh_token)throw new Error("No refresh token available");try{const e=await z.post(`${$}/auth/google-calendar/refresh`,{refresh_token:this.tokens.refresh_token});return this.saveTokens({...this.tokens,access_token:e.data.access_token,expires_at:e.data.expires_at}),!0}catch(J){return console.error("Failed to refresh Google Calendar token:",J),!1}}async getCalendarList(){return(await this.makeRequest("/users/me/calendarList")).items||[]}async getCalendarStats(){try{const e=await this.getCalendarList(),s=e.find((e=>e.primary))||e[0],t=(new Date).toISOString(),a=new Date;a.setDate(a.getDate()+30);const r=await this.getEvents(s.id,{timeMin:t,timeMax:a.toISOString(),maxResults:100});return{connectedCalendars:e.length,primaryCalendar:s.summary,upcomingEvents:r.length,lastSynced:(new Date).toISOString()}}catch(J){throw console.error("Failed to get calendar stats:",J),J}}async getEvents(e,s={}){const t=Object.entries(s).map((([e,s])=>`${e}=${encodeURIComponent(s)}`)).join("&");return(await this.makeRequest(`/calendars/${encodeURIComponent(e)}/events?${t}`)).items||[]}async createEvent(e,s){return this.makeRequest(`/calendars/${encodeURIComponent(e)}/events`,"POST",s)}async updateEvent(e,s,t){return this.makeRequest(`/calendars/${encodeURIComponent(e)}/events/${encodeURIComponent(s)}`,"PUT",t)}async deleteEvent(e,s){return this.makeRequest(`/calendars/${encodeURIComponent(e)}/events/${encodeURIComponent(s)}`,"DELETE")}async getAvailability(e,s,t){try{const a=await this.makeRequest("/freeBusy","POST",{timeMin:s,timeMax:t,items:e.map((e=>({id:e})))}),r=[];return Object.entries(a.calendars||{}).forEach((([e,s])=>{(s.busy||[]).forEach((s=>{r.push({calendarId:e,start:s.start,end:s.end})}))})),r}catch(J){throw console.error("Failed to get availability:",J),J}}async syncCalendars(){if(this.tokens)try{const e=await this.getCalendarList(),s=await this.getLocalAvailabilityWindows();for(const t of e){if(!t.primary&&!this.shouldSyncSecondaryCalendars())continue;const e=await this.getEvents(t.id,{timeMin:(new Date).toISOString(),timeMax:this.getMaxSyncDate().toISOString(),singleEvents:!0});this.updateLocalAvailability(e,s)}await this.detectConflicts(),this.emitEvent("calendar-updated",{timestamp:(new Date).toISOString()})}catch(J){console.error("Failed to sync calendars:",J)}}getMaxSyncDate(){const e=new Date;return e.setDate(e.getDate()+60),e}shouldSyncSecondaryCalendars(){return!0}async getLocalAvailabilityWindows(){try{return(await z.get(`${$}/availability-windows`)).data||[]}catch(J){return console.error("Failed to get local availability windows:",J),[]}}async updateLocalAvailability(e,s){const t=e.map((e=>({start:new Date(e.start.dateTime||`${e.start.date}T00:00:00`),end:new Date(e.end.dateTime||`${e.end.date}T23:59:59`),title:e.summary||"Busy",sourceCalendarId:e.organizer?e.organizer.email:null,eventId:e.id}))),a=[];for(const r of s){let e=!1;const s=[];for(const a of r.availableSlots){const r=new Date(a.start),i=new Date(a.end);let n=!1;for(const s of t)if(s.start<=r&&s.end>r||s.start<i&&s.end>=i||s.start>=r&&s.end<=i){n=!0,e=!0;break}n||s.push(a)}if(e){const e={...r,availableSlots:s};a.push(e),await z.put(`${$}/availability-windows/${r.id}`,e)}}return a}async detectConflicts(){try{const e=(await z.get(`${$}/meetings`,{params:{status:"confirmed"}})).data||[],s=(await this.getCalendarList()).map((e=>e.id));for(const t of e){if(new Date(t.end)<new Date)continue;const e=await this.getAvailability(s,t.start,t.end);e.length>0&&(this.emitEvent("conflict-detected",{meeting:t,conflictingEvents:e}),await z.put(`${$}/meetings/${t.id}`,{...t,hasConflict:!0,conflictDetails:e}))}}catch(J){console.error("Failed to detect conflicts:",J)}}async handleWebhookNotification(e){await this.syncCalendars()}},q=()=>W.getAuthUrl(),F=({className:e="",size:s=32,showText:t=!1,textClassName:r=""})=>a.jsxs("div",{className:`flex items-center ${e}`,children:[a.jsxs("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-indigo-600",children:[a.jsx("rect",{x:"3",y:"6",width:"18",height:"15",rx:"2",fill:"currentColor"}),a.jsx("rect",{x:"5",y:"8",width:"14",height:"11",rx:"1",fill:"white"}),a.jsx("rect",{x:"7",y:"3",width:"2",height:"4",rx:"1",fill:"currentColor"}),a.jsx("rect",{x:"15",y:"3",width:"2",height:"4",rx:"1",fill:"currentColor"}),a.jsx("rect",{x:"7",y:"10",width:"10",height:"1.5",rx:"0.75",fill:"currentColor"}),a.jsx("rect",{x:"7",y:"14",width:"6",height:"1.5",rx:"0.75",fill:"currentColor"})]}),t&&a.jsx("span",{className:`ml-2 font-bold text-indigo-600 ${r}`,children:"Slotify"})]});t.Component;function P({children:e}){const[s,t]=i.useState(null),[r,n]=i.useState(!0);return i.useEffect((()=>f.onAuthStateChanged((e=>{t(e),n(!1)}))),[]),r?a.jsx("div",{children:"Loading..."}):s?e:a.jsx(l,{to:"/login",replace:!0})}function _(){const[s,t]=i.useState(null),[r,n]=i.useState(!0),[l,o]=i.useState(null),[d]=p(f),c=e(),[m,x]=i.useState(!1),[h,g]=i.useState(!1),[u,j]=i.useState(null),[y,v]=i.useState(!1),[b,N]=i.useState([]),[w,k]=i.useState(!0),[C,E]=i.useState(null),[T,B]=i.useState(!1),[I,R]=i.useState("");i.useEffect((()=>{(async()=>{try{const e=W.isConnected();if(g(e),e){(async()=>{try{j(null)}catch(e){console.error("Error fetching calendar stats:",e)}})()}}catch(e){console.error("Error checking calendar connection:",e)}})()}),[]),i.useEffect((()=>{d&&(async()=>{try{k(!0),setTimeout((()=>{N([]),k(!1)}),1e3)}catch(e){console.error("Error fetching approval requests:",e),N([]),k(!1)}})()}),[d]),i.useEffect((()=>{(async()=>{try{n(!0),setTimeout((()=>{o({meetings:{upcoming:0,today:0,nextMeeting:null},availabilityWindows:{count:0,totalHours:0,mostPopular:null},bookingLinks:{count:0,active:0,mostUsed:null},analytics:{completedMeetings:0,totalBooked:0,averageDuration:0},activity:[]}),n(!1)}),1e3)}catch(e){console.error("Dashboard error:",e),t(e.message||"An error occurred loading the dashboard"),n(!1)}})()}),[]);const z=async()=>{try{x(!0);const e=q();window.location.href=e}catch(e){console.error("Error starting Google Auth flow:",e),t("Failed to start Google Calendar authorization. Please try again."),x(!1)}},[$,F]=i.useState("");return r?a.jsxs(S,{children:[a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map(((e,s)=>a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},s)))}),a.jsxs("div",{className:"grid gap-6 mt-6 md:grid-cols-2",children:[a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm animate-pulse",children:[a.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3 mb-4"}),a.jsx("div",{className:"space-y-3",children:[...Array(3)].map(((e,s)=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 mr-3"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-4/5"})]})]},s)))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm animate-pulse",children:[a.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/4 mb-4"}),a.jsx("div",{className:"space-y-4",children:[...Array(2)].map(((e,s)=>a.jsxs("div",{className:"border border-gray-100 rounded-lg p-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},s)))})]})]})]}):s?a.jsx(S,{children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 text-center",children:[a.jsx("svg",{className:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load dashboard"}),a.jsx("p",{className:"text-gray-500 mb-4",children:s}),a.jsx(L,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})}):a.jsxs(S,{children:[$&&a.jsx(D,{type:"success",message:$,onClose:()=>F(""),className:"mb-6"}),a.jsx(A,{className:"mb-6 bg-gradient-to-r from-indigo-600 to-purple-600 text-white border-0",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl md:text-2xl font-bold",children:["Welcome back, ",(null==d?void 0:d.displayName)||"there","!"]}),a.jsx("p",{className:"mt-1 text-indigo-100",children:"Manage your schedule and meeting links in one place."})]}),a.jsxs("div",{className:"mt-4 md:mt-0 space-x-3",children:[a.jsx(L,{variant:"light",onClick:()=>c("/create-window"),className:"bg-white/20 hover:bg-white/30 text-white border-0",children:"Create Availability"}),a.jsx(L,{onClick:()=>c("/create-link"),className:"bg-white text-indigo-700 hover:bg-indigo-50",children:"New Booking Link"})]})]})}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-6",children:[a.jsxs(A,{className:"hover:shadow-md transition-all duration-200",onClick:()=>c("/meetings"),children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg text-indigo-600",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Upcoming Meetings"}),a.jsxs("div",{className:"flex items-baseline",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.meetings.upcoming}),l.meetings.today>0&&a.jsxs(M,{variant:"primary",size:"sm",className:"ml-2",children:[l.meetings.today," today"]})]})]})]}),l.meetings.nextMeeting&&a.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"NEXT MEETING"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:l.meetings.nextMeeting.title}),a.jsxs("p",{className:"text-xs text-gray-500",children:[l.meetings.nextMeeting.date," at ",l.meetings.nextMeeting.time," with"," ",a.jsx("span",{className:"font-medium",children:l.meetings.nextMeeting.clientName})]})]})]}),a.jsxs(A,{className:"hover:shadow-md transition-all duration-200",onClick:()=>c("/create-window"),children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg text-emerald-600",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Availability Windows"}),a.jsxs("div",{className:"flex items-baseline",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.availabilityWindows.count}),l.availabilityWindows.totalHours>0&&a.jsxs("p",{className:"ml-2 text-sm text-gray-500",children:["(",l.availabilityWindows.totalHours," hrs/week)"]})]})]})]}),l.availabilityWindows.mostPopular&&a.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"MOST POPULAR WINDOW"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:l.availabilityWindows.mostPopular})]})]}),a.jsxs(A,{className:"hover:shadow-md transition-all duration-200",onClick:()=>c("/create-link"),children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg text-purple-600",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Booking Links"}),a.jsxs("div",{className:"flex items-baseline",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.bookingLinks.count}),a.jsxs(M,{variant:"success",size:"sm",className:"ml-2",children:[l.bookingLinks.active," active"]})]})]})]}),l.bookingLinks.mostUsed&&a.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"MOST USED LINK"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:l.bookingLinks.mostUsed.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Booked ",l.bookingLinks.mostUsed.booked," times"]})]})]}),a.jsxs(A,{className:"hover:shadow-md transition-all duration-200",onClick:()=>h?v(!0):null,children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Calendar Integration"}),a.jsx("p",{className:"text-lg font-bold text-gray-900",children:h?"Connected":"Not Connected"})]})]}),h&&u?a.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"CALENDARS"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.connectedCalendars})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"EVENTS"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.upcomingEvents})]})]})}):a.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:a.jsx(L,{variant:"primary",size:"sm",className:"w-full justify-center",onClick:e=>{e.stopPropagation(),z()},isLoading:m,children:"Connect Google Calendar"})})]})]}),!w&&b.length>0&&a.jsxs(A,{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-5",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(M,{variant:"warning",className:"mr-2",children:b.length}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Pending Approval Requests"})]}),a.jsx(L,{variant:"link",size:"sm",onClick:()=>c("/approvals"),children:"View all"})]}),a.jsx("div",{className:"space-y-4",children:b.map((e=>a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 border border-orange-100 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors cursor-pointer",onClick:()=>c(`/approvals/${e.id}`),children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-100 flex items-center justify-center text-orange-700 font-medium",children:e.clientName.charAt(0).toUpperCase()}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.clientName}),a.jsx("p",{className:"text-sm text-gray-500",children:e.clientEmail})]})]}),a.jsxs("div",{className:"mt-3 sm:mt-0 sm:ml-4",children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.meetingName}),a.jsxs("p",{className:"text-sm text-gray-500",children:[e.date," at ",e.time]})]}),a.jsxs("div",{className:"mt-3 sm:mt-0 flex space-x-2",children:[a.jsx(L,{size:"sm",variant:"success",onClick:s=>{s.stopPropagation(),(async e=>{try{await new Promise((e=>setTimeout(e,800))),N(b.filter((s=>s.id!==e))),F("Booking request approved successfully!")}catch(s){console.error("Error approving booking:",s),t("Failed to approve booking request. Please try again.")}})(e.id)},children:"Approve"}),a.jsx(L,{size:"sm",variant:"danger",onClick:s=>{s.stopPropagation(),E(e.id),B(!0)},children:"Reject"})]})]},e.id)))})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[a.jsxs(A,{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-5",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Activity"}),a.jsx(L,{variant:"link",size:"sm",onClick:()=>{},children:"View all"})]}),a.jsx("div",{className:"space-y-5",children:l.activity.map((e=>a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:`\n                  flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center\n                  ${"booking"===e.type?"bg-indigo-100 text-indigo-600":"link"===e.type?"bg-purple-100 text-purple-600":"bg-emerald-100 text-emerald-600"}\n                `,children:e.icon}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.title}),a.jsx("p",{className:"text-xs text-gray-500",children:e.description}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.time})]})]},e.id)))}),0===l.activity.length&&a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-gray-500",children:"No recent activity yet"})})]}),a.jsxs(A,{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-5",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-colors cursor-pointer",onClick:()=>c("/create-link"),children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-indigo-100 rounded text-indigo-600",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Create Booking Link"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Generate shareable scheduling links"})]})]})}),a.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-emerald-300 hover:bg-emerald-50 transition-colors cursor-pointer",onClick:()=>c("/create-window"),children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-emerald-100 rounded text-emerald-600",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Set Availability"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Define your available time slots"})]})]})}),a.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors cursor-pointer",onClick:()=>c("/meetings"),children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded text-blue-600",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"View Meetings"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Manage your upcoming meetings"})]})]})}),h?a.jsx("div",{className:"p-4 border border-green-100 bg-green-50 rounded-lg cursor-pointer",onClick:()=>v(!0),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-green-800",children:"Calendar Connected"}),a.jsxs("p",{className:"text-xs text-green-700",children:[(null==u?void 0:u.primaryCalendar)||"Google Calendar"," is syncing automatically"]})]}),a.jsx(M,{variant:"success",size:"sm",children:"Active"})]})}):a.jsxs("div",{className:"p-4 border border-indigo-100 bg-indigo-50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-indigo-900 mb-2",children:"Connect Your Calendar"}),a.jsx("p",{className:"text-xs text-indigo-700 mb-3",children:"Integrate with Google Calendar to automatically block unavailable times."}),a.jsxs(L,{variant:"primary",size:"sm",fullWidth:!0,className:"justify-center",onClick:z,isLoading:m,children:[a.jsxs("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("path",{d:"M12 0C5.383 0 0 5.383 0 12s5.383 12 12 12 12-5.383 12-12S18.617 0 12 0z",fill:"#4285F4"}),a.jsx("path",{d:"M12 0C5.383 0 0 5.383 0 12s5.383 12 12 12 12-5.383 12-12S18.617 0 12 0z",fill:"#4285F4"}),a.jsx("path",{d:"M12 4.8V0C5.383 0 0 5.383 0 12h4.8c0-3.977 3.223-7.2 7.2-7.2z",fill:"#34A853"}),a.jsx("path",{d:"M19.2 12H24c0-6.617-5.383-12-12-12v4.8c3.977 0 7.2 3.223 7.2 7.2z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 19.2c-3.977 0-7.2-3.223-7.2-7.2H0c0 6.617 5.383 12 12 12v-4.8z",fill:"#EA4335"})]}),"Connect Google Calendar"]})]})]})]})]})]})}function U(){const[e,s]=i.useState([]),[t,r]=i.useState(!0),[n,l]=i.useState(""),[o,d]=i.useState("upcoming"),[c,m]=i.useState(null),[x,h]=i.useState(!1),[g,u]=i.useState(!1),[p,j]=i.useState(!1),[y,v]=i.useState(!1),[b,f]=i.useState(""),[N,w]=i.useState("");i.useEffect((()=>{(async()=>{try{r(!0),setTimeout((()=>{s([{id:"m1",clientName:"John Smith",clientEmail:"john@example.com",startTime:"2025-05-24T10:00:00Z",endTime:"2025-05-24T10:30:00Z",meetingName:"Initial Consultation",status:"confirmed",linkId:"l1",questions:[{question:"What topics would you like to discuss?",answer:"Retirement planning and investment strategies"}]},{id:"m2",clientName:"Sarah Johnson",clientEmail:"sarah@example.com",startTime:"2025-05-25T14:00:00Z",endTime:"2025-05-25T14:45:00Z",meetingName:"Follow-up Session",status:"pending",linkId:"l2",questions:[{question:"What topics would you like to discuss?",answer:"Tax planning for small business"},{question:"How did you hear about us?",answer:"Referral from a friend"}]},{id:"m3",clientName:"David Lee",clientEmail:"david@example.com",startTime:"2025-05-14T09:00:00Z",endTime:"2025-05-14T09:30:00Z",meetingName:"Initial Consultation",status:"completed",linkId:"l1",questions:[{question:"What topics would you like to discuss?",answer:"Estate planning options"}]},{id:"m4",clientName:"Emma Wilson",clientEmail:"emma@example.com",startTime:"2025-05-13T11:00:00Z",endTime:"2025-05-13T12:00:00Z",meetingName:"Strategy Session",status:"rejected",linkId:"l3",questions:[{question:"What are your business goals?",answer:"Expanding to new markets in the next year"}],rejectionReason:"Not available at the requested time"},{id:"m5",clientName:"Michael Brown",clientEmail:"michael@example.com",startTime:"2025-05-26T15:00:00Z",endTime:"2025-05-26T15:45:00Z",meetingName:"Consultation",status:"pending",linkId:"l4",questions:[{question:"What services are you interested in?",answer:"Financial planning and investment advice"}]}]),r(!1)}),1e3)}catch(e){console.error("Error fetching meetings:",e),l("Failed to load meetings. Please try again."),r(!1)}})()}),[]);const k=async(t,a,r="")=>{try{j(!0),v(!0),await new Promise((e=>setTimeout(e,1e3))),s(e.map((e=>e.id===t?{...e,status:a,...r&&{rejectionReason:r}}:e))),h(!1),u(!1),c&&c.id===t&&m({...c,status:a,...r&&{rejectionReason:r}});let i="";i="canceled"===a?"canceled":"confirmed"===a?"approved":"rejected"===a?"rejected":"updated",f(`Meeting ${i} successfully.`),setTimeout((()=>{f("")}),5e3)}catch(i){console.error("Error updating meeting status:",i),l("Failed to update meeting status. Please try again.")}finally{j(!1),v(!1),w("")}},C=e.filter((e=>{const s=new Date(e.startTime),t=new Date;return"upcoming"===o?s>t&&!["canceled","rejected"].includes(e.status):"past"!==o||(s<t||["completed","canceled","rejected"].includes(e.status))})),E=e=>new Date(e).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"}),B=e=>new Date(e).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}),I=e=>{const s=new Date,t=new Date(e);return t.getDate()===s.getDate()&&t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()},R=e=>{m(e)},z=()=>{m(null)},$=({status:e})=>a.jsx(M,{variant:{confirmed:"success",completed:"secondary",canceled:"danger",pending:"warning",rejected:"danger"}[e]||"secondary",rounded:!0,children:{confirmed:"Confirmed",completed:"Completed",canceled:"Canceled",pending:"Pending Approval",rejected:"Rejected"}[e]||e});return t?a.jsx(S,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:[...Array(3)].map(((e,s)=>a.jsx("div",{className:"h-10 w-24 bg-gray-200 rounded-md animate-pulse"},s)))}),a.jsx(A,{children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),a.jsx("div",{className:"space-y-6",children:[...Array(3)].map(((e,s)=>a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-full"}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/3 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-1"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]}),a.jsx("div",{className:"h-8 w-24 bg-gray-200 rounded"})]},s)))})]})})]})}):a.jsxs(S,{children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"upcoming",label:"Upcoming"},{id:"past",label:"Past"},{id:"all",label:"All Meetings"}].map((e=>a.jsx("button",{onClick:()=>d(e.id),className:`\n                  whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\n                  ${o===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}\n                `,children:e.label},e.id)))})})}),b&&a.jsx(D,{type:"success",message:b,onClose:()=>f(""),className:"mb-6"}),n&&a.jsx(D,{type:"error",message:n,onClose:()=>l(""),className:"mb-6"}),a.jsxs(A,{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"upcoming"===o?"Upcoming Meetings":"past"===o?"Past Meetings":"All Meetings"}),C.length>0?a.jsx("div",{className:"space-y-6",children:C.map((e=>a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 border border-gray-100 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>R(e),children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-medium",children:e.clientName.charAt(0).toUpperCase()}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.clientName}),a.jsx("p",{className:"text-sm text-gray-500",children:e.clientEmail})]})]}),a.jsxs("div",{className:"mt-3 sm:mt-0 flex flex-col sm:items-center",children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.meetingName}),a.jsxs("p",{className:"text-sm text-gray-500",children:[I(e.startTime)?"Today":E(e.startTime),", ",B(e.startTime)]})]}),a.jsxs("div",{className:"mt-3 sm:mt-0 flex items-center",children:[a.jsx($,{status:e.status}),a.jsx("button",{onClick:s=>{s.stopPropagation(),R(e)},className:"ml-4 text-indigo-600 hover:text-indigo-800",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]},e.id)))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsx("h3",{className:"mt-2 text-base font-medium text-gray-900",children:"No meetings found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"upcoming"===o?"You have no upcoming meetings scheduled.":"past"===o?"You have no past meetings.":"You have no meetings scheduled."}),a.jsx("div",{className:"mt-6",children:a.jsx(L,{variant:"primary",onClick:()=>window.location.href="/create-link",children:"Create Booking Link"})})]})]}),c&&a.jsx(T,{isOpen:!!c,onClose:z,title:c.meetingName,size:"lg",footer:a.jsxs(a.Fragment,{children:[a.jsx(L,{variant:"secondary",onClick:z,children:"Close"}),"confirmed"===c.status&&a.jsxs(a.Fragment,{children:[a.jsx(L,{variant:"success",onClick:async()=>{c&&await k(c.id,"completed")},className:"ml-3",children:"Mark as Completed"}),a.jsx(L,{variant:"danger",onClick:()=>{c&&h(!0)},className:"ml-3",children:"Cancel Meeting"})]}),"pending"===c.status&&a.jsxs(a.Fragment,{children:[a.jsx(L,{variant:"success",onClick:()=>(async e=>{await k(e,"confirmed")})(c.id),isLoading:y,className:"ml-3",children:"Approve Meeting"}),a.jsx(L,{variant:"danger",onClick:()=>u(!0),className:"ml-3",children:"Reject Meeting"})]})]}),children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase mb-2",children:"Client Information"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-medium",children:c.clientName.charAt(0).toUpperCase()}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"font-medium text-gray-900",children:c.clientName}),a.jsx("p",{className:"text-sm text-gray-500",children:c.clientEmail})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase mb-2",children:"Meeting Details"}),a.jsx("p",{className:"font-medium text-gray-900",children:I(c.startTime)?"Today":E(c.startTime)}),a.jsxs("p",{className:"text-gray-500",children:[B(c.startTime)," - ",B(c.endTime)]}),a.jsx("div",{className:"mt-2",children:a.jsx($,{status:c.status})})]})]}),c.rejectionReason&&a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100",children:[a.jsx("h4",{className:"text-sm font-medium text-red-800 mb-1",children:"Rejection Reason"}),a.jsx("p",{className:"text-sm text-red-700",children:c.rejectionReason})]}),c.questions&&c.questions.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase mb-2",children:"Questionnaire Responses"}),a.jsx("div",{className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:c.questions.map(((e,s)=>a.jsxs("div",{className:"border-l-2 border-indigo-200 pl-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:e.question}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.answer})]},s)))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase mb-2",children:"Calendar Integration"}),a.jsxs("div",{className:"space-x-3",children:[a.jsx(L,{variant:"secondary",size:"sm",icon:a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),children:"Add to Google Calendar"}),a.jsx(L,{variant:"secondary",size:"sm",icon:a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),children:"Download ICS File"})]})]})]})}),a.jsx(T,{isOpen:x,onClose:()=>h(!1),title:"Cancel Meeting",size:"md",footer:a.jsxs(a.Fragment,{children:[a.jsx(L,{variant:"secondary",onClick:()=>h(!1),disabled:p,children:"Keep Meeting"}),a.jsx(L,{variant:"danger",onClick:async()=>{await k(c.id,"canceled")},isLoading:p,className:"ml-3",children:p?"Canceling...":"Yes, Cancel Meeting"})]}),children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-red-50 p-4 rounded-lg text-red-700",children:a.jsxs("div",{className:"flex",children:[a.jsx("svg",{className:"h-5 w-5 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("p",{children:"Are you sure you want to cancel this meeting?"})]})}),c&&a.jsxs("div",{children:[a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Meeting:"})," ",c.meetingName]}),a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Client:"})," ",c.clientName]}),a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Date & Time:"})," ",E(c.startTime),", ",B(c.startTime)]})]}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Canceling this meeting will send a notification to the client and remove it from both of your calendars."})]})}),a.jsx(T,{isOpen:g,onClose:()=>u(!1),title:"Reject Meeting",size:"md",footer:a.jsxs(a.Fragment,{children:[a.jsx(L,{variant:"secondary",onClick:()=>u(!1),disabled:y,children:"Cancel"}),a.jsx(L,{variant:"danger",onClick:()=>(async(e,s)=>{await k(e,"rejected",s)})(c.id,N),isLoading:y,className:"ml-3",children:y?"Rejecting...":"Confirm Rejection"})]}),children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg text-yellow-700",children:a.jsxs("div",{className:"flex",children:[a.jsx("svg",{className:"h-5 w-5 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("p",{children:"Are you sure you want to reject this meeting request?"})]})}),c&&a.jsxs("div",{children:[a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Meeting:"})," ",c.meetingName]}),a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Client:"})," ",c.clientName]}),a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Date & Time:"})," ",E(c.startTime),", ",B(c.startTime)]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"rejectionReason",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rejection Reason (optional)"}),a.jsx("textarea",{id:"rejectionReason",rows:"3",value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500",placeholder:"Provide a reason for rejecting this meeting..."}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This reason will be included in the notification to the client."})]})]})})]})}function V(){var s;const t=e(),[r,n]=i.useState([{id:"w1",dayOfWeek:"Monday",startHour:"09:00",endHour:"17:00"},{id:"w2",dayOfWeek:"Wednesday",startHour:"13:00",endHour:"18:00"}]),[l,o]=i.useState("Monday"),[d,c]=i.useState("09:00"),[m,x]=i.useState("17:00"),[h,g]=i.useState(""),[u,p]=i.useState(!1),[j,y]=i.useState(""),[v,b]=i.useState(""),[N,w]=i.useState("create"),[k,C]=i.useState(!1),[E,I]=i.useState(!0),[R,z]=i.useState([]),[$,W]=i.useState("primary"),[F,P]=i.useState(!1);i.useEffect((()=>{(async()=>{try{await new Promise((e=>setTimeout(e,500)));const e=null!==localStorage.getItem("googleCalendarTokens");C(e),e&&z([{id:"primary",name:"Main Calendar"},{id:"work",name:"Work Calendar"},{id:"personal",name:"Personal Events"}])}catch(e){console.error("Error checking calendar connection:",e)}})()}),[]);const _=(()=>{const e=[];for(let s=0;s<24;s++)for(let t=0;t<60;t+=15){const a=s.toString().padStart(2,"0"),r=t.toString().padStart(2,"0");e.push(`${a}:${r}`)}return e})(),U=async()=>{try{const e=await q();window.location.href=e}catch(e){console.error("Error starting Google Auth flow:",e),y("Failed to start Google Calendar authorization. Please try again.")}},V=async e=>{try{return await new Promise((e=>setTimeout(e,800))),console.log(`Created recurring event in Google Calendar for ${e.dayOfWeek} from ${e.startHour} to ${e.endHour}`),!0}catch(s){throw console.error("Error syncing with Google Calendar:",s),new Error("Failed to sync with Google Calendar. The window was saved but calendar sync failed.")}},O=e=>{const[s,t]=e.split(":");return`${parseInt(s)%12||12}:${t} ${parseInt(s)>=12?"PM":"AM"}`};return a.jsxs(S,{children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>w("create"),className:`\n                whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\n                ${"create"===N?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}\n              `,children:"Create Availability"}),a.jsx("button",{onClick:()=>w("manage"),className:`\n                whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\n                ${"manage"===N?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}\n              `,children:"Manage Availability"})]})})}),j&&a.jsx(D,{type:"error",message:j,onClose:()=>y(""),className:"mb-6"}),v&&a.jsx(D,{type:"success",message:v,onClose:()=>b(""),className:"mb-6"}),!k&&a.jsx(A,{className:"mb-6 bg-blue-50 border border-blue-100",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-blue-800",children:"Connect Google Calendar"}),a.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"Connect your Google Calendar to automatically sync availability windows and prevent double bookings."})]}),a.jsx("div",{className:"mt-4 md:mt-0",children:a.jsxs(L,{onClick:U,variant:"primary",size:"sm",children:[a.jsxs("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("path",{d:"M12 0C5.383 0 0 5.383 0 12s5.383 12 12 12 12-5.383 12-12S18.617 0 12 0z",fill:"#4285F4"}),a.jsx("path",{d:"M12 0C5.383 0 0 5.383 0 12s5.383 12 12 12 12-5.383 12-12S18.617 0 12 0z",fill:"#4285F4"}),a.jsx("path",{d:"M12 4.8V0C5.383 0 0 5.383 0 12h4.8c0-3.977 3.223-7.2 7.2-7.2z",fill:"#34A853"}),a.jsx("path",{d:"M19.2 12H24c0-6.617-5.383-12-12-12v4.8c3.977 0 7.2 3.223 7.2 7.2z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 19.2c-3.977 0-7.2-3.223-7.2-7.2H0c0 6.617 5.383 12 12 12v-4.8z",fill:"#EA4335"})]}),"Connect Google Calendar"]})})]})}),"create"===N&&a.jsxs(A,{children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Set Your Weekly Availability"}),a.jsxs("form",{onSubmit:async e=>{var s;if(e.preventDefault(),p(!0),y(""),b(""),d>=m&&(y("End time must be after start time"),1))p(!1);else try{if(!(null==(s=f.currentUser)?void 0:s.uid))throw new Error("User not authenticated");const e={id:`w${Date.now()}`,dayOfWeek:l,startHour:d,endHour:m,name:h||void 0};E&&k&&await V(e),n([...r,e]),b("Availability window created successfully!"),g(""),w("manage")}catch(t){console.error("Error creating availability window:",t),y(t.message||"Failed to create availability window")}finally{p(!1)}},className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"dayOfWeek",className:"block text-sm font-medium text-gray-700 mb-1",children:"Day of Week"}),a.jsx("select",{id:"dayOfWeek",value:l,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((e=>a.jsx("option",{value:e,children:e},e)))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Window Name (Optional)"}),a.jsx("input",{id:"name",type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"e.g. Working Hours, Evening Availability",className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"startHour",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),a.jsx("select",{id:"startHour",value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:_.map((e=>a.jsx("option",{value:e,children:O(e)},`start-${e}`)))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"endHour",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),a.jsx("select",{id:"endHour",value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:_.map((e=>a.jsx("option",{value:e,children:O(e)},`end-${e}`)))})]})]}),k&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Calendar Sync Options"}),a.jsx(L,{variant:"link",size:"sm",onClick:()=>P(!0),children:"Manage Calendars"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Sync with Google Calendar"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Create recurring events in your calendar to block this time each week"})]}),a.jsx(B,{enabled:E,onChange:I})]}),E&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{htmlFor:"calendarId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Calendar"}),a.jsx("select",{id:"calendarId",value:$,onChange:e=>W(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:R.map((e=>a.jsx("option",{value:e.id,children:e.name},e.id)))})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Availability Preview"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(M,{variant:"primary",rounded:!0,children:l}),a.jsx("span",{className:"mx-2 text-gray-500",children:"•"}),a.jsxs("span",{className:"text-gray-700",children:[O(d)," - ",O(m)]}),a.jsx("span",{className:"mx-2 text-gray-500",children:"•"}),a.jsx("span",{className:"text-gray-700",children:(()=>{const e=new Date(`1970-01-01T${d}:00`),s=(new Date(`1970-01-01T${m}:00`)-e)/36e5;return`${s} ${1===s?"hour":"hours"}`})()})]}),k&&E&&a.jsxs("div",{className:"mt-2 text-xs text-indigo-600 flex items-center",children:[a.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Will be synced with"," ",(null==(s=R.find((e=>e.id===$)))?void 0:s.name)||"Google Calendar"]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx(L,{type:"button",variant:"secondary",onClick:()=>t("/dashboard"),disabled:u,children:"Cancel"}),a.jsx(L,{type:"submit",isLoading:u,disabled:u,children:"Create Availability Window"})]})]})]}),"manage"===N&&a.jsxs(A,{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Your Availability Windows"}),a.jsx(L,{variant:"primary",size:"sm",onClick:()=>w("create"),children:"Add New"})]}),r.length>0?a.jsx("div",{className:"space-y-4",children:r.map((e=>a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(M,{variant:"primary",rounded:!0,children:e.dayOfWeek}),e.name&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mx-2 text-gray-500",children:"•"}),a.jsx("span",{className:"font-medium text-gray-900",children:e.name})]})]}),a.jsxs("p",{className:"text-gray-700 mt-1",children:[O(e.startHour)," - ",O(e.endHour)]})]}),a.jsxs("div",{className:"mt-3 sm:mt-0 space-x-2",children:[a.jsx(L,{variant:"secondary",size:"sm",onClick:()=>{o(e.dayOfWeek),c(e.startHour),x(e.endHour),g(e.name||""),w("create")},children:"Edit"}),a.jsx(L,{variant:"danger",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this availability window?"))try{p(!0);const s=r.find((s=>s.id===e));E&&k&&s&&(await new Promise((e=>setTimeout(e,500))),console.log(`Deleted recurring event in Google Calendar for ${s.dayOfWeek}`)),n(r.filter((s=>s.id!==e))),b("Availability window deleted successfully")}catch(s){y("Failed to delete availability window")}finally{p(!1)}})(e.id),disabled:u,children:"Delete"})]})]},e.id)))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("h3",{className:"mt-2 text-base font-medium text-gray-900",children:"No availability windows"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You haven't set any availability windows yet."}),a.jsx("div",{className:"mt-6",children:a.jsx(L,{variant:"primary",onClick:()=>w("create"),children:"Create Your First Window"})})]})]}),a.jsx("div",{className:"mt-6",children:a.jsxs(A,{className:"bg-indigo-50 border border-indigo-100",children:[a.jsx("h3",{className:"text-sm font-medium text-indigo-800 mb-2",children:"About Availability Windows"}),a.jsx("p",{className:"text-sm text-indigo-700",children:"Availability windows define when you're available for meetings on a weekly basis. Create multiple windows to set different hours for different days."}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white p-3 rounded border border-indigo-100",children:[a.jsx("h4",{className:"text-xs font-medium text-indigo-800 uppercase mb-1",children:"Recurring Schedule"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Windows repeat weekly until you change or delete them"})]}),a.jsxs("div",{className:"bg-white p-3 rounded border border-indigo-100",children:[a.jsx("h4",{className:"text-xs font-medium text-indigo-800 uppercase mb-1",children:"Calendar Blocking"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Meetings are only scheduled during your available windows"})]}),a.jsxs("div",{className:"bg-white p-3 rounded border border-indigo-100",children:[a.jsx("h4",{className:"text-xs font-medium text-indigo-800 uppercase mb-1",children:"Conflict Prevention"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Slots are automatically blocked when you have existing meetings"})]})]})]})}),a.jsx(T,{isOpen:F,onClose:()=>P(!1),title:"Manage Calendar Integration",size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Connected Calendars"}),R.length>0?a.jsx("div",{className:"space-y-3",children:R.map((e=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 rounded-full bg-blue-100 text-blue-600",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500",children:"Google Calendar"})]})]}),a.jsx(B,{enabled:!0,onChange:()=>{}})]},e.id)))}):a.jsx("p",{className:"text-gray-500",children:"No calendars connected yet."}),a.jsx("div",{className:"mt-4",children:a.jsx(L,{variant:"secondary",size:"sm",onClick:U,children:"Add Another Calendar"})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Calendar Sync Settings"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{htmlFor:"autoSync",className:"text-sm text-gray-700",children:"Automatically sync new availability windows"}),a.jsx(B,{enabled:E,onChange:I,id:"autoSync"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{htmlFor:"blockConflicts",className:"text-sm text-gray-700",children:"Block time slots with existing calendar events"}),a.jsx(B,{enabled:!0,onChange:()=>{},id:"blockConflicts"})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:a.jsx(L,{variant:"primary",onClick:()=>P(!1),children:"Save Settings"})})]})})]})}function O(){var s;const t=e(),[r,n]=i.useState(1),[l,o]=i.useState(""),[d,c]=i.useState(""),[m,x]=i.useState(30),[h,g]=i.useState(14),[u,p]=i.useState(0),[j,y]=i.useState(""),[v,b]=i.useState([{id:`q${Date.now()}`,label:"What topics would you like to discuss?"}]),[N,w]=i.useState(!1),[k,C]=i.useState([]),[E]=i.useState([{id:"1",name:"John Doe",email:"john@example.com"},{id:"2",name:"Jane Smith",email:"jane@example.com"},{id:"3",name:"Mike Johnson",email:"mike@example.com"}]),[I,R]=i.useState(""),[z,$]=i.useState(!1),[W,q]=i.useState(""),[F,P]=i.useState(null),[_,U]=i.useState(!1),[V,O]=i.useState(""),[H,G]=i.useState(!1),[Y,J]=i.useState([]),[Q,Z]=i.useState(["primary"]),[K,X]=i.useState(!0),[ee,se]=i.useState(!0),[te,ae]=i.useState(!1),[re,ie]=i.useState(""),ne=[{value:15,label:"15 minutes"},{value:30,label:"30 minutes"},{value:45,label:"45 minutes"},{value:60,label:"60 minutes"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}];i.useEffect((()=>{(async()=>{try{const e=null!==localStorage.getItem("googleCalendarTokens");G(e),e&&J([{id:"primary",name:"Main Calendar",primary:!0},{id:"work",name:"Work Calendar",primary:!1},{id:"personal",name:"Personal Events",primary:!1}])}catch(e){console.error("Error checking calendar connection:",e)}})()}),[]),i.useEffect((()=>{var e,s;if(l){const t=l.toLowerCase().replace(/[^a-z0-9 ]/g,"").replace(/\s+/g,"-");ie(`https://slotify.app/book/${(null==(s=null==(e=f.currentUser)?void 0:e.uid)?void 0:s.slice(0,8))||"user"}/${t}`)}else ie("")}),[l]);const le=()=>{I.trim()&&(b([...v,{id:`q${Date.now()}`,label:I}]),R(""))},oe=async()=>(await new Promise((e=>setTimeout(e,800))),!0),de=e=>{navigator.clipboard.writeText(e).then((()=>{O("Link copied to clipboard!"),setTimeout((()=>O("")),3e3)})).catch((e=>{console.error("Failed to copy link:",e),q("Failed to copy link to clipboard")}))},ce=()=>{1!==r||l?1===r&&N&&0===k.length?q("Please select at least one approver"):(window.scrollTo(0,0),n((e=>e+1)),q("")):q("Please provide a meeting name")},me=()=>{window.scrollTo(0,0),n((e=>e-1)),q("")};return 4===r&&F?a.jsxs(S,{children:[a.jsxs(A,{className:"text-center max-w-md mx-auto",children:[a.jsx("div",{className:"mx-auto h-14 w-14 flex items-center justify-center rounded-full bg-green-100 text-green-600 mb-4",children:a.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Booking Link Created!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Share this link with your clients to allow them to book meetings with you."}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-lg mb-8 cursor-pointer",onClick:()=>U(!0),children:[a.jsx("div",{className:"truncate text-indigo-600 text-sm w-4/5 text-left",children:F.linkUrl}),a.jsx("button",{onClick:e=>{e.stopPropagation(),de(F.linkUrl)},className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",title:"Copy to clipboard",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),V&&a.jsx("div",{className:"mb-6 p-2 bg-green-50 text-green-600 text-sm rounded-md animate-slideInUp",children:V}),F.calendarIntegration&&a.jsxs("div",{className:"mb-6 p-3 bg-blue-50 border border-blue-100 rounded-lg text-left",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"h-5 w-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Calendar Integration Active"})]}),a.jsx("p",{className:"text-xs text-blue-700 ml-7 mt-1",children:"Bookings will automatically create events in your Google Calendar"})]}),F.requiresApproval&&a.jsxs("div",{className:"mb-6 p-3 bg-purple-50 border border-purple-100 rounded-lg text-left",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"h-5 w-5 text-purple-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),a.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Approval Workflow Active"})]}),a.jsx("p",{className:"text-xs text-purple-700 ml-7 mt-1",children:"Bookings will require approval from selected approvers"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[a.jsx(L,{onClick:()=>t("/dashboard"),variant:"secondary",className:"w-full sm:w-auto",children:"Back to Dashboard"}),a.jsx(L,{onClick:()=>{o(""),c(""),x(30),g(14),p(0),y(""),b([{id:`q${Date.now()}`,label:"What topics would you like to discuss?"}]),w(!1),C([]),n(1),P(null)},className:"w-full sm:w-auto",children:"Create Another Link"})]})]}),a.jsx(T,{isOpen:_,onClose:()=>U(!1),title:"Your Booking Link",size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"break-all bg-gray-50 p-4 rounded-lg border border-gray-200",children:a.jsx("p",{className:"text-gray-800 font-mono",children:F.linkUrl})}),a.jsxs("div",{className:"text-gray-600",children:[a.jsx("p",{className:"mb-2",children:"You can share this link in several ways:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Send it via email to clients"}),a.jsx("li",{children:"Add it to your email signature"}),a.jsx("li",{children:"Share it on your social media profiles"}),a.jsx("li",{children:"Add it to your website or landing page"})]})]}),a.jsxs("div",{className:"flex justify-end",children:[a.jsx(L,{onClick:()=>de(F.linkUrl),className:"mr-3",children:"Copy Link"}),a.jsx(L,{variant:"secondary",onClick:()=>U(!1),children:"Close"})]})]})})]}):a.jsxs(S,{children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[a.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium "+(r>=1?"bg-indigo-600 text-white":"bg-gray-200 text-gray-600"),children:"1"}),a.jsx("span",{className:"text-xs font-medium",children:"Meeting Details"})]}),a.jsx("div",{className:"h-1 w-full mx-2 "+(r>=2?"bg-indigo-600":"bg-gray-200")}),a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[a.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium "+(r>=2?"bg-indigo-600 text-white":"bg-gray-200 text-gray-600"),children:"2"}),a.jsx("span",{className:"text-xs font-medium",children:"Questions"})]}),a.jsx("div",{className:"h-1 w-full mx-2 "+(r>=3?"bg-indigo-600":"bg-gray-200")}),a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[a.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium "+(r>=3?"bg-indigo-600 text-white":"bg-gray-200 text-gray-600"),children:"3"}),a.jsx("span",{className:"text-xs font-medium",children:"Review & Create"})]})]})}),W&&a.jsx(D,{type:"error",message:W,onClose:()=>q(""),className:"mb-6"}),V&&a.jsx(D,{type:"success",message:V,onClose:()=>O(""),className:"mb-6"}),a.jsxs(A,{children:[1===r&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Meeting Details"}),a.jsxs("form",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"meetingName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Name *"}),a.jsx("input",{id:"meetingName",type:"text",value:l,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g. Initial Consultation, Strategy Session",required:!0}),re&&a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Link preview: ",re]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),a.jsx("textarea",{id:"description",value:d,onChange:e=>c(e.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe what this meeting is about"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"meetingLength",className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Length *"}),a.jsx("select",{id:"meetingLength",value:m,onChange:e=>x(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:ne.map((e=>a.jsx("option",{value:e.value,children:e.label},e.value)))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"maxAdvanceDays",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Days in Advance *"}),a.jsx("input",{id:"maxAdvanceDays",type:"number",value:h,onChange:e=>g(Number(e.target.value)),min:"1",max:"365",className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",required:!0}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"How far in advance can people book meetings"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"usageLimit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Usage Limit (0 for unlimited)"}),a.jsx("input",{id:"usageLimit",type:"number",value:u,onChange:e=>p(Number(e.target.value)),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum number of bookings allowed with this link"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"expirationDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiration Date (Optional)"}),a.jsx("input",{id:"expirationDate",type:"date",value:j,onChange:e=>y(e.target.value),min:(()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]})(),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Date when this link will no longer be usable"})]})]}),H?a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Calendar Integration"}),a.jsx(L,{variant:"link",size:"sm",onClick:()=>ae(!0),children:"Configure Calendars"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Check calendar conflicts"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Prevent double bookings by checking your calendar"})]}),a.jsx(B,{enabled:K,onChange:X})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Create calendar events"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Automatically create events when bookings are made"})]}),a.jsx(B,{enabled:ee,onChange:se})]})]})]}):a.jsx("div",{className:"border-t border-gray-200 pt-4 mt-3",children:a.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"h-5 w-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Calendar Integration (Optional)"})]}),a.jsx("p",{className:"text-xs text-blue-700 ml-7 mt-1",children:"Connect your Google Calendar to prevent double bookings and automatically create events"}),a.jsx("div",{className:"mt-3 ml-7",children:a.jsx(L,{size:"sm",onClick:async()=>{try{localStorage.setItem("googleCalendarTokens","dummy-token"),G(!0),J([{id:"primary",name:"Main Calendar",primary:!0},{id:"work",name:"Work Calendar",primary:!1},{id:"personal",name:"Personal Events",primary:!1}]),O("Google Calendar connected successfully!")}catch(e){console.error("Error connecting to Google Calendar:",e),q("Failed to connect Google Calendar. Please try again.")}},children:"Connect Google Calendar"})})]})}),a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Approval Settings"}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Require Approval"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Bookings will require approval before being confirmed"})]}),a.jsx(B,{enabled:N,onChange:w})]}),N&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Approvers"}),a.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto p-2 border border-gray-200 rounded-lg",children:E.map((e=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:`approver-${e.id}`,checked:k.includes(e.id),onChange:()=>{k.includes(e.id)?C(k.filter((s=>s!==e.id))):C([...k,e.id])},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),a.jsxs("label",{htmlFor:`approver-${e.id}`,className:"ml-3 text-sm text-gray-700",children:[e.name," ",e.email&&`(${e.email})`]})]},e.id)))}),N&&0===k.length&&a.jsx("p",{className:"mt-1 text-xs text-red-500",children:"Please select at least one approver"})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx(L,{onClick:ce,className:"w-full sm:w-auto",children:"Continue to Questions"})})]})]}),2===r&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Booking Questions"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Add questions that your clients will answer when booking a meeting. This helps you prepare and makes meetings more productive."}),a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"space-y-4",children:v.map(((e,s)=>a.jsx("div",{className:"relative p-4 border border-gray-200 rounded-lg bg-white",children:a.jsxs("div",{className:"flex items-start",children:[a.jsxs("div",{className:"flex-grow",children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsxs(M,{color:"gray",className:"mr-2",children:["Question ",s+1]}),0===s&&a.jsx(M,{color:"blue",children:"Required"})]}),a.jsx("input",{type:"text",value:e.label,onChange:s=>{return t=e.id,a=s.target.value,void b(v.map((e=>e.id===t?{...e,label:a}:e)));var t,a},className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your question"})]}),s>0&&a.jsx("button",{onClick:()=>{return s=e.id,void b(v.filter((e=>e.id!==s)));var s},className:"ml-3 p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Remove question",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},e.id)))}),a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"text",value:I,onChange:e=>R(e.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-lg rounded-r-none shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Add a new question...",onKeyPress:e=>"Enter"===e.key&&le()}),a.jsx(L,{onClick:le,disabled:!I.trim(),className:"rounded-l-none",children:"Add Question"})]})})]}),a.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[a.jsx(L,{variant:"secondary",onClick:me,children:"Back"}),a.jsx(L,{onClick:ce,children:"Continue to Review"})]})]}),3===r&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Review & Create"}),a.jsxs("div",{className:"mb-8 space-y-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Meeting Details"})}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Meeting Name"}),a.jsx("p",{className:"text-sm text-gray-900",children:l})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Meeting Length"}),a.jsx("p",{className:"text-sm text-gray-900",children:(null==(s=ne.find((e=>e.value===m)))?void 0:s.label)||`${m} minutes`})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Max Days in Advance"}),a.jsxs("p",{className:"text-sm text-gray-900",children:[h," days"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Usage Limit"}),a.jsx("p",{className:"text-sm text-gray-900",children:0===u?"Unlimited":u})]}),j&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Expiration Date"}),a.jsx("p",{className:"text-sm text-gray-900",children:new Date(j).toLocaleDateString()})]})]}),d&&a.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"}),a.jsx("p",{className:"text-sm text-gray-900",children:d})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Booking Questions"})}),a.jsx("div",{className:"p-4",children:0===v.length?a.jsx("p",{className:"text-sm text-gray-500",children:"No questions added."}):a.jsx("ul",{className:"space-y-2",children:v.map(((e,s)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"inline-flex items-center justify-center h-5 w-5 rounded-full bg-gray-200 text-gray-600 text-xs font-medium mr-2 mt-0.5",children:s+1}),a.jsx("span",{className:"text-sm text-gray-900",children:e.label})]},e.id)))})})]}),H&&a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Calendar Integration"})}),a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-gray-900",children:"Check for calendar conflicts"}),a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+(K?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:K?"Enabled":"Disabled"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-gray-900",children:"Create calendar events"}),a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+(ee?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:ee?"Enabled":"Disabled"})]}),Q.length>0&&ee&&a.jsxs("div",{className:"pt-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Selected Calendars:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Q.map((e=>{const s=Y.find((s=>s.id===e));return a.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-full",children:(null==s?void 0:s.name)||e},e)}))})]})]})})]}),N&&a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Approval Settings"})}),a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-gray-900",children:"Requires Approval"}),a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Enabled"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Approvers:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:k.map((e=>{const s=E.find((s=>s.id===e));return a.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-full",children:(null==s?void 0:s.name)||e},e)}))})]})]})})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Booking Link Preview"})}),a.jsxs("div",{className:"p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"This is the link your clients will use to book meetings with you:"}),a.jsx("div",{className:"flex items-center p-2 bg-gray-50 border border-gray-300 rounded-lg",children:a.jsx("span",{className:"text-sm font-mono text-indigo-600 truncate",children:re})})]})]})]}),a.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[a.jsx(L,{variant:"secondary",onClick:me,children:"Back"}),a.jsx(L,{onClick:async e=>{var s;e&&e.preventDefault(),$(!0),q("");try{if(!(null==(s=f.currentUser)?void 0:s.uid))throw new Error("User not authenticated");if(!l)throw new Error("Meeting name is required");if(N&&0===k.length)throw new Error("Please select at least one approver when approval is required");H&&K&&await oe(),await new Promise((e=>setTimeout(e,1500)));const e=Math.random().toString(36).substring(2,10),t={meetingName:l,description:d,meetingLength:m,maxAdvanceDays:h,usageLimit:u,expirationDate:j,questions:v,linkId:e,linkUrl:re,calendarIntegration:H&&ee,selectedCalendarIds:H?Q:[],checkCalendarConflicts:K,createCalendarEvents:ee};N&&k.length>0&&(t.requiresApproval=!0,t.approvers=k),P(t),n(4)}catch(t){console.error("Error creating scheduling link:",t),q(t.message||"Failed to create scheduling link"),window.scrollTo(0,0)}finally{$(!1)}},isLoading:z,loadingText:"Creating...",children:"Create Booking Link"})]})]})]}),a.jsx(T,{isOpen:te,onClose:()=>ae(!1),title:"Configure Calendars",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-4",children:"Select the calendars you want to use for booking availability and event creation."}),a.jsx("div",{className:"space-y-3",children:Y.map((e=>a.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:`calendar-${e.id}`,checked:Q.includes(e.id),onChange:()=>{return s=e.id,void Z((e=>e.includes(s)?e.filter((e=>e!==s)):[...e,s]));var s},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),a.jsxs("label",{htmlFor:`calendar-${e.id}`,className:"ml-2 text-sm font-medium text-gray-700",children:[e.name,e.primary&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-800",children:"Primary"})]})]})},e.id)))}),a.jsx("div",{className:"flex justify-end",children:a.jsx(L,{variant:"secondary",onClick:()=>ae(!1),children:"Close"})})]})})]})}function H(){var s;const t=e(),[r,n]=i.useState(1),[l,o]=i.useState(""),[d,c]=i.useState(""),[m,x]=i.useState(30),[h,g]=i.useState(14),[u,p]=i.useState(0),[j,y]=i.useState(""),[v,b]=i.useState(!1),[N,w]=i.useState([{id:`q${Date.now()}`,label:"What topics would you like to discuss?"}]),[k,C]=i.useState(""),[E,B]=i.useState(!1),[I,R]=i.useState(""),[z,$]=i.useState(null),[W,q]=i.useState(!1),[F,P]=i.useState(""),[_,U]=i.useState(""),V=[{value:15,label:"15 minutes"},{value:30,label:"30 minutes"},{value:45,label:"45 minutes"},{value:60,label:"60 minutes"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}];i.useEffect((()=>{var e,s;if(l){const t=l.toLowerCase().replace(/[^a-z0-9 ]/g,"").replace(/\s+/g,"-");U(`https://slotify.app/book/${(null==(s=null==(e=f.currentUser)?void 0:e.uid)?void 0:s.slice(0,8))||"user"}/${t}`)}else U("")}),[l]);const O=()=>{k.trim()&&(w([...N,{id:`q${Date.now()}`,label:k}]),C(""))},H=e=>{navigator.clipboard.writeText(e).then((()=>{P("Link copied to clipboard!"),setTimeout((()=>P("")),3e3)})).catch((e=>{console.error("Failed to copy link:",e),R("Failed to copy link to clipboard")}))};return 4===r&&z?a.jsxs(S,{children:[a.jsxs(A,{className:"text-center max-w-md mx-auto",children:[a.jsx("div",{className:"mx-auto h-14 w-14 flex items-center justify-center rounded-full bg-green-100 text-green-600 mb-4",children:a.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Booking Link Created!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Share this link with your clients to allow them to book meetings with you."}),a.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Booking Flow:"}),a.jsx("p",{className:"text-sm text-gray-600",children:z.requiresApproval?"Bookings will require your approval before confirmation":"Bookings will be automatically confirmed"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-lg mb-8 cursor-pointer",onClick:()=>q(!0),children:[a.jsx("div",{className:"truncate text-indigo-600 text-sm w-4/5 text-left",children:z.linkUrl}),a.jsx("button",{onClick:e=>{e.stopPropagation(),H(z.linkUrl)},className:"p-2 text-gray-500 hover:text-gray-700 transition-colors",title:"Copy to clipboard",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),F&&a.jsx("div",{className:"mb-6 p-2 bg-green-50 text-green-600 text-sm rounded-md animate-slideInUp",children:F}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[a.jsx(L,{onClick:()=>t("/dashboard"),variant:"secondary",className:"w-full sm:w-auto",children:"Back to Dashboard"}),a.jsx(L,{onClick:()=>{o(""),c(""),x(30),g(14),p(0),y(""),b(!1),w([{id:`q${Date.now()}`,label:"What topics would you like to discuss?"}]),n(1),$(null)},className:"w-full sm:w-auto",children:"Create Another Link"})]})]}),a.jsx(T,{isOpen:W,onClose:()=>q(!1),title:"Your Booking Link",size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"break-all bg-gray-50 p-4 rounded-lg border border-gray-200",children:a.jsx("p",{className:"text-gray-800 font-mono",children:z.linkUrl})}),a.jsxs("div",{className:"text-gray-600",children:[a.jsx("p",{className:"mb-2",children:"You can share this link in several ways:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Send it via email to clients"}),a.jsx("li",{children:"Add it to your email signature"}),a.jsx("li",{children:"Share it on your social media profiles"}),a.jsx("li",{children:"Add it to your website or landing page"})]})]}),a.jsxs("div",{className:"flex justify-end",children:[a.jsx(L,{onClick:()=>H(z.linkUrl),className:"mr-3",children:"Copy Link"}),a.jsx(L,{variant:"secondary",onClick:()=>q(!1),children:"Close"})]})]})})]}):a.jsxs(S,{children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[a.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium "+(r>=1?"bg-indigo-600 text-white":"bg-gray-200 text-gray-600"),children:"1"}),a.jsx("span",{className:"text-xs font-medium",children:"Meeting Details"})]}),a.jsx("div",{className:"h-1 w-full mx-2 "+(r>=2?"bg-indigo-600":"bg-gray-200")}),a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[a.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium "+(r>=2?"bg-indigo-600 text-white":"bg-gray-200 text-gray-600"),children:"2"}),a.jsx("span",{className:"text-xs font-medium",children:"Questions"})]}),a.jsx("div",{className:"h-1 w-full mx-2 "+(r>=3?"bg-indigo-600":"bg-gray-200")}),a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[a.jsx("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium "+(r>=3?"bg-indigo-600 text-white":"bg-gray-200 text-gray-600"),children:"3"}),a.jsx("span",{className:"text-xs font-medium",children:"Review & Create"})]})]})}),I&&a.jsx(D,{type:"error",message:I,onClose:()=>R(""),className:"mb-6"}),a.jsxs(A,{children:[1===r&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Meeting Details"}),a.jsx("form",{className:"space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"meetingName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Name *"}),a.jsx("input",{id:"meetingName",type:"text",value:l,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g. Initial Consultation, Strategy Session",required:!0}),_&&a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Link preview: ",_]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),a.jsx("textarea",{id:"description",value:d,onChange:e=>c(e.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe what this meeting is about"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"meetingLength",className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Length *"}),a.jsx("select",{id:"meetingLength",value:m,onChange:e=>x(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:V.map((e=>a.jsx("option",{value:e.value,children:e.label},e.value)))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"maxAdvanceDays",className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Days in Advance *"}),a.jsx("input",{id:"maxAdvanceDays",type:"number",value:h,onChange:e=>g(Number(e.target.value)),min:"1",max:"365",className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",required:!0}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"How far in advance can people book meetings"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"usageLimit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Usage Limit (0 for unlimited)"}),a.jsx("input",{id:"usageLimit",type:"number",value:u,onChange:e=>p(Number(e.target.value)),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum number of bookings allowed with this link"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"expirationDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiration Date (Optional)"}),a.jsx("input",{id:"expirationDate",type:"date",value:j,onChange:e=>y(e.target.value),min:(()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]})(),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Date when this link will no longer be usable"})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"requiresApproval",className:"block text-sm font-medium text-gray-700",children:"Require approval for bookings"}),a.jsx("p",{className:"text-xs text-gray-500",children:"When enabled, bookings will need your manual approval before confirmation"})]}),a.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[a.jsx("input",{type:"checkbox",id:"requiresApproval",checked:v,onChange:()=>b(!v),className:"sr-only"}),a.jsx("label",{htmlFor:"requiresApproval",className:"block overflow-hidden h-6 rounded-full cursor-pointer "+(v?"bg-indigo-600":"bg-gray-200"),children:a.jsx("span",{className:"block h-6 w-6 rounded-full bg-white shadow transform transition-transform "+(v?"translate-x-4":"translate-x-0")})})]})]})]})})]}),2===r&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Custom Questions"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Add questions that will be asked when someone books a meeting with you."}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"space-y-4",children:N.map(((e,s)=>a.jsx("div",{className:"flex items-start space-x-2",children:a.jsxs("div",{className:"flex-grow",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Question ",s+1]}),a.jsxs("div",{className:"flex",children:[a.jsx("input",{type:"text",value:e.label,onChange:s=>{return t=e.id,a=s.target.value,void w(N.map((e=>e.id===t?{...e,label:a}:e)));var t,a},className:"flex-grow px-3 py-2 border border-gray-300 rounded-l-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your question"}),a.jsx("button",{type:"button",onClick:()=>{return s=e.id,void w(N.filter((e=>e.id!==s)));var s},className:"bg-gray-100 border border-gray-300 border-l-0 rounded-r-lg px-3 text-gray-600 hover:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},e.id)))}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add Another Question"}),a.jsxs("div",{className:"flex",children:[a.jsx("input",{type:"text",value:k,onChange:e=>C(e.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-l-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter a new question",onKeyPress:e=>{"Enter"===e.key&&k.trim()&&(e.preventDefault(),O())}}),a.jsx("button",{type:"button",onClick:O,disabled:!k.trim(),className:"bg-indigo-600 text-white px-4 rounded-r-lg hover:bg-indigo-700 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Question Tips"}),a.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Ask specific questions to get more useful information"}),a.jsx("li",{children:"Avoid questions that are too complex or time-consuming"}),a.jsx("li",{children:"Consider what information you need before the meeting"}),a.jsx("li",{children:"Limited to 5 questions to respect your client's time"})]})]})]})]}),3===r&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Review & Create Link"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Meeting Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Meeting Name"}),a.jsx("p",{className:"text-gray-900",children:l})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Meeting Length"}),a.jsx("p",{className:"text-gray-900",children:(null==(s=V.find((e=>e.value===m)))?void 0:s.label)||`${m} minutes`})]}),d&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Description"}),a.jsx("p",{className:"text-gray-900",children:d})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Max Days in Advance"}),a.jsxs("p",{className:"text-gray-900",children:[h," days"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Usage Limit"}),a.jsx("p",{className:"text-gray-900",children:0===u?"Unlimited":u})]}),j&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Expiration Date"}),a.jsx("p",{className:"text-gray-900",children:new Date(j).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Approval Required"}),a.jsx("p",{className:"text-gray-900",children:v?"Yes - Bookings will need manual approval":"No - Bookings will be automatically confirmed"})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Custom Questions"}),N.length>0?a.jsx("ul",{className:"space-y-3",children:N.map(((e,s)=>a.jsxs("li",{className:"flex items-center",children:[a.jsx(M,{variant:"secondary",size:"sm",className:"mr-3",children:s+1}),a.jsx("span",{className:"text-gray-900",children:e.label})]},e.id)))}):a.jsx("p",{className:"text-gray-500",children:"No custom questions added."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Booking Link Preview"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Your booking link will look like this:"}),a.jsx("div",{className:"bg-gray-50 p-3 rounded border border-gray-200 text-indigo-600 break-all font-mono text-sm",children:_||"https://slotify.app/book/your-unique-link"})]})]})]}),a.jsxs("div",{className:"flex justify-between mt-8 pt-4 border-t border-gray-200",children:[r>1?a.jsx(L,{type:"button",variant:"secondary",onClick:()=>{window.scrollTo(0,0),n((e=>e-1)),R("")},disabled:E,children:"Back"}):a.jsx(L,{type:"button",variant:"secondary",onClick:()=>t("/dashboard"),disabled:E,children:"Cancel"}),r<3?a.jsx(L,{type:"button",onClick:()=>{1!==r||l?(window.scrollTo(0,0),n((e=>e+1)),R("")):R("Please provide a meeting name")},disabled:E,children:"Continue"}):a.jsx(L,{type:"button",onClick:async e=>{var s;e&&e.preventDefault(),B(!0),R("");try{if(!(null==(s=f.currentUser)?void 0:s.uid))throw new Error("User not authenticated");if(!l)throw new Error("Meeting name is required");await new Promise((e=>setTimeout(e,1500)));const e=Math.random().toString(36).substring(2,10);$({linkId:e,linkUrl:_,requiresApproval:v}),n(4)}catch(t){console.error("Error creating scheduling link:",t),R(t.message||"Failed to create scheduling link"),window.scrollTo(0,0)}finally{B(!1)}},isLoading:E,disabled:E,children:E?"Creating...":"Create Booking Link"})]})]})]})}function G(){e();const[s,t]=i.useState([]),[r,n]=i.useState(!0),[l,o]=i.useState(null),[d,c]=i.useState(!1),[m,x]=i.useState(""),[h,g]=i.useState("pending"),[u,p]=i.useState(""),[j,y]=i.useState("");i.useEffect((()=>{(async()=>{try{n(!0),setTimeout((()=>{t([{id:"a1",clientName:"Alex Johnson",clientEmail:"alex@example.com",meetingName:"Strategy Session",date:"2025-05-26",time:"10:00 AM",status:"pending",submittedAt:"2025-05-19T15:30:00Z"},{id:"a2",clientName:"Emma Wilson",clientEmail:"emma@example.com",meetingName:"Initial Consultation",date:"2025-05-27",time:"2:00 PM",status:"pending",submittedAt:"2025-05-19T16:45:00Z"},{id:"a3",clientName:"Michael Brown",clientEmail:"michael@example.com",meetingName:"Project Review",date:"2025-05-25",time:"3:30 PM",status:"approved",submittedAt:"2025-05-18T10:15:00Z",approvedAt:"2025-05-19T08:30:00Z",approvedBy:"Jane Smith"},{id:"a4",clientName:"Lisa Chen",clientEmail:"lisa@example.com",meetingName:"Sales Demo",date:"2025-05-24",time:"1:00 PM",status:"rejected",submittedAt:"2025-05-17T14:20:00Z",rejectedAt:"2025-05-18T09:15:00Z",rejectedBy:"Jane Smith",rejectionReason:"Schedule conflict with team meeting"}]),n(!1)}),1e3)}catch(e){console.error("Error fetching approvals:",e),y("Failed to load approval requests"),n(!1)}})()}),[]);const v=async e=>{try{t(s.map((s=>s.id===e?{...s,status:"approved",approvedAt:(new Date).toISOString()}:s))),p("Meeting approved successfully"),setTimeout((()=>p("")),5e3)}catch(a){console.error("Error approving meeting:",a),y("Failed to approve meeting")}},b=s.filter((e=>"all"===h||e.status===h));return a.jsxs(S,{children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Booking Approval Requests"}),u&&a.jsx(D,{type:"success",message:u,onClose:()=>p(""),className:"mb-6"}),j&&a.jsx(D,{type:"error",message:j,onClose:()=>y(""),className:"mb-6"}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"pending",label:"Pending"},{id:"approved",label:"Approved"},{id:"rejected",label:"Rejected"},{id:"all",label:"All Requests"}].map((e=>a.jsxs("button",{onClick:()=>g(e.id),className:`\n                  whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\n                  ${h===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}\n                `,children:[e.label,"pending"===e.id&&a.jsx("span",{className:"ml-2 py-0.5 px-2 text-xs rounded-full bg-orange-100 text-orange-700",children:s.filter((e=>"pending"===e.status)).length})]},e.id)))})})}),a.jsx(A,{children:r?a.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(3)].map(((e,s)=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),a.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})},s)))}):b.length>0?a.jsx("div",{className:"space-y-4",children:b.map((e=>a.jsxs("div",{className:`\n                  flex flex-col sm:flex-row sm:items-center justify-between p-4 border rounded-lg\n                  ${"pending"===e.status?"border-orange-100 bg-orange-50 hover:bg-orange-100":"approved"===e.status?"border-green-100 bg-green-50 hover:bg-green-100":"border-red-100 bg-red-50 hover:bg-red-100"} transition-colors cursor-pointer\n                `,onClick:()=>{o(e)},children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center font-medium\n                    ${"pending"===e.status?"bg-orange-100 text-orange-700":"approved"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}\n                  `,children:e.clientName.charAt(0).toUpperCase()}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.clientName}),a.jsx("p",{className:"text-sm text-gray-500",children:e.clientEmail})]})]}),a.jsxs("div",{className:"mt-3 sm:mt-0 sm:ml-4",children:[a.jsx("p",{className:"font-medium text-gray-900",children:e.meetingName}),a.jsxs("p",{className:"text-sm text-gray-500",children:[e.date," at ",e.time]})]}),a.jsxs("div",{className:"mt-3 sm:mt-0 flex flex-col sm:items-end",children:[a.jsx(M,{variant:"pending"===e.status?"warning":"approved"===e.status?"success":"danger",rounded:!0,className:"mb-2",children:"pending"===e.status?"Pending Approval":"approved"===e.status?"Approved":"Rejected"}),"pending"===e.status&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(L,{size:"sm",variant:"success",onClick:s=>{s.stopPropagation(),v(e.id)},children:"Approve"}),a.jsx(L,{size:"sm",variant:"danger",onClick:s=>{s.stopPropagation(),o(e),c(!0)},children:"Reject"})]})]})]},e.id)))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),a.jsx("h3",{className:"mt-2 text-base font-medium text-gray-900",children:"No approval requests found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"pending"===h?"You have no pending approval requests.":"approved"===h?"You have no approved requests.":"rejected"===h?"You have no rejected requests.":"There are no approval requests in the system."})]})}),l&&a.jsx(T,{isOpen:!!l&&!d,onClose:()=>o(null),title:"Booking Request Details",size:"lg",footer:a.jsxs(a.Fragment,{children:[a.jsx(L,{variant:"secondary",onClick:()=>o(null),children:"Close"}),"pending"===l.status&&a.jsxs(a.Fragment,{children:[a.jsx(L,{variant:"success",onClick:()=>v(l.id),className:"ml-3",children:"Approve Request"}),a.jsx(L,{variant:"danger",onClick:()=>c(!0),className:"ml-3",children:"Reject Request"})]})]}),children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase mb-2",children:"Client Information"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`h-12 w-12 rounded-full flex items-center justify-center font-medium\n                    ${"pending"===l.status?"bg-orange-100 text-orange-700":"approved"===l.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}\n                  `,children:l.clientName.charAt(0).toUpperCase()}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"font-medium text-gray-900",children:l.clientName}),a.jsx("p",{className:"text-sm text-gray-500",children:l.clientEmail})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase mb-2",children:"Meeting Details"}),a.jsx("p",{className:"font-medium text-gray-900",children:l.meetingName}),a.jsxs("p",{className:"text-gray-500",children:[l.date," at ",l.time]}),a.jsx("div",{className:"mt-2",children:a.jsx(M,{variant:"pending"===l.status?"warning":"approved"===l.status?"success":"danger",rounded:!0,children:"pending"===l.status?"Pending Approval":"approved"===l.status?"Approved":"Rejected"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase mb-2",children:"Timeline"}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-0 left-4 h-full w-0.5 bg-gray-200"}),a.jsxs("div",{className:"relative flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center z-10",children:a.jsx("svg",{className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Booking Requested"}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(l.submittedAt).toLocaleString()})]})]}),"pending"!==l.status&&a.jsxs("div",{className:"relative flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center z-10 "+("approved"===l.status?"bg-green-500":"bg-red-500"),children:a.jsx("svg",{className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:"approved"===l.status?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"approved"===l.status?"Booking Approved":"Booking Rejected"}),a.jsxs("p",{className:"text-xs text-gray-500",children:["approved"===l.status?new Date(l.approvedAt).toLocaleString():new Date(l.rejectedAt).toLocaleString(),"approved"===l.status?` by ${l.approvedBy}`:` by ${l.rejectedBy}`]}),"rejected"===l.status&&l.rejectionReason&&a.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Reason: ",l.rejectionReason]})]})]})]})})]})]})}),a.jsx(T,{isOpen:d,onClose:()=>c(!1),title:"Reject Booking Request",size:"md",footer:a.jsxs(a.Fragment,{children:[a.jsx(L,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),a.jsx(L,{variant:"danger",onClick:()=>{l&&(async(e,a)=>{try{t(s.map((s=>s.id===e?{...s,status:"rejected",rejectedAt:(new Date).toISOString(),rejectionReason:a}:s))),c(!1),x(""),p("Meeting rejected successfully"),setTimeout((()=>p("")),5e3)}catch(r){console.error("Error rejecting meeting:",r),y("Failed to reject meeting")}})(l.id,m)},className:"ml-3",children:"Reject Request"})]}),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"rejectionReason",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for Rejection"}),a.jsx("textarea",{id:"rejectionReason",rows:"3",value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500",placeholder:"Please provide a reason for rejecting this booking request"})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"This reason will be included in the notification sent to the client."})]})})]})}function Y(){const[e,s]=i.useState(!1),[t,r]=i.useState(null),[n,c]=p(f);return i.useEffect((()=>{const t=setTimeout((()=>{e||c||(console.warn("Auth initialization timed out"),s(!0),r("Authentication initialization timed out. Please try refreshing the page."))}),1e4);if(!f)return console.error("Firebase auth not initialized"),r("Firebase authentication failed to initialize"),s(!0),()=>clearTimeout(t);const a=f.onAuthStateChanged((e=>{console.log("Auth state changed, user:",e?"logged in":"not logged in"),s(!0)}),(e=>{console.error("Auth state error:",e),r("Authentication error: "+e.message),s(!0)}));return()=>{clearTimeout(t),a&&a()}}),[c]),c||!e?a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:[a.jsx(F,{size:48,showText:!0,className:"mb-8",textClassName:"text-xl"}),a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})]}):t?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:a.jsxs(A,{className:"max-w-md w-full p-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(F,{size:48,showText:!0,className:"mx-auto mb-6",textClassName:"text-xl"}),a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Authentication Error"}),a.jsx("p",{className:"text-gray-700 mb-4",children:t}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Please try refreshing the page or contact support if the issue persists."})]}),a.jsx(L,{onClick:()=>window.location.reload(),fullWidth:!0,children:"Refresh Page"})]})}):a.jsxs(o,{children:[a.jsx(d,{path:"/login",element:a.jsx(R,{initialSignUp:!1})}),a.jsx(d,{path:"/signup",element:a.jsx(R,{initialSignUp:!0})}),a.jsx(d,{path:"/book/:linkId",element:a.jsx(H,{})}),a.jsx(d,{path:"/",element:a.jsx(P,{children:a.jsx(_,{})})}),a.jsx(d,{path:"/dashboard",element:a.jsx(P,{children:a.jsx(_,{})})}),a.jsx(d,{path:"/meetings",element:a.jsx(P,{children:a.jsx(U,{})})}),a.jsx(d,{path:"/create-window",element:a.jsx(P,{children:a.jsx(V,{})})}),a.jsx(d,{path:"/create-link",element:a.jsx(P,{children:a.jsx(O,{})})}),a.jsx(d,{path:"/approvals",element:a.jsx(P,{children:a.jsx(G,{})})}),a.jsx(d,{path:"/approvals/:approvalId",element:a.jsx(P,{children:a.jsx(G,{})})}),a.jsx(d,{path:"*",element:n?a.jsx(l,{to:"/dashboard",replace:!0}):a.jsx(l,{to:"/login",replace:!0})})]})}console.log("Application starting..."),console.log("Environment check:",{viteApiUrl:"present",viteFirebaseKey:"present"});try{if(!(window.localStorage?window.fetch||(console.error("fetch API is not supported"),0):(console.error("localStorage is not supported"),0)))throw new Error("Your browser does not support required features");(()=>{const e=window.location.hostname,s=["localhost","127.0.0.1","procalenderfrontend.firebaseapp.com","procalender-frontend.vercel.app","procalender-frontend-git-main-uma26madasus-projects.vercel.app"].includes(e);return console.log(`Current domain: ${e}, Allowed for Firebase: ${s}`),s})()||console.warn("Current domain may not be authorized in Firebase. Please check Firebase Authentication settings.");c.createRoot(document.getElementById("root")).render(a.jsx(t.StrictMode,{children:a.jsx(m,{children:a.jsx(Y,{})})})),console.log("Application rendered successfully")}catch(J){console.error("Fatal application error:",J),document.getElementById("root").innerHTML=`\n    <div style="max-width: 500px; margin: 50px auto; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">\n      <h1 style="color: #d00; margin-top: 0;">Application Failed to Start</h1>\n      <p>The application couldn't be initialized:</p>\n      <pre style="background: #f5f5f5; padding: 10px; overflow: auto; border-radius: 4px;">${J.message}</pre>\n      <p>Current domain: ${window.location.hostname}</p>\n      <button onclick="window.location.reload()" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 20px;">Refresh Page</button>\n      <a href="/debug" style="display: inline-block; margin-left: 10px; color: #3b82f6;">View Debug Info</a>\n    </div>\n  `}
